<!DOCTYPE html>
<html lang="en"><head>
<script src="PIR_quardo_files/libs/clipboard/clipboard.min.js"></script>
<script src="PIR_quardo_files/libs/quarto-html/tabby.min.js"></script>
<script src="PIR_quardo_files/libs/quarto-html/popper.min.js"></script>
<script src="PIR_quardo_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="PIR_quardo_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="PIR_quardo_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="PIR_quardo_files/libs/quarto-html/quarto-syntax-highlighting-d2bbf9acb00b033fb60fab8fa7f66143.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">
<meta name="author" content="fill presenter names here">
<title>Programming in R</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
<link rel="stylesheet" href="PIR_quardo_files/libs/revealjs/dist/reset.css">
<link rel="stylesheet" href="PIR_quardo_files/libs/revealjs/dist/reveal.css">
<style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #cbccc6; background-color: #1f2430; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #cbccc6; } /* Normal */
    code span.al { color: #ff3333; background-color: #332430; font-weight: bold; } /* Alert */
    code span.an { color: #ffe6b3; } /* Annotation */
    code span.at { color: #73d0ff; } /* Attribute */
    code span.bn { color: #ffcc66; } /* BaseN */
    code span.bu { color: #95e6cb; } /* BuiltIn */
    code span.cf { color: #ffa759; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #95e6cb; } /* Char */
    code span.cn { color: #d4bfff; } /* Constant */
    code span.co { color: #5c6773; font-style: italic; } /* Comment */
    code span.cv { color: #d4bfff; } /* CommentVar */
    code span.do { color: #5c6773; } /* Documentation */
    code span.dt { color: #ffa759; } /* DataType */
    code span.dv { color: #ffcc66; } /* DecVal */
    code span.er { color: #ff3333; text-decoration: underline; } /* Error */
    code span.ex { color: #73d0ff; font-weight: bold; } /* Extension */
    code span.fl { color: #ffcc66; } /* Float */
    code span.fu { color: #ffd580; } /* Function */
    code span.im { color: #bae67e; } /* Import */
    code span.in { color: #ffcc66; } /* Information */
    code span.kw { color: #ffa759; font-weight: bold; } /* Keyword */
    code span.op { color: #f29e74; } /* Operator */
    code span.ot { color: #5ccfe6; } /* Other */
    code span.pp { color: #f28779; } /* Preprocessor */
    code span.re { color: #73d0ff; background-color: #2a4254; } /* RegionMarker */
    code span.sc { color: #95e6cb; } /* SpecialChar */
    code span.ss { color: #95e6cb; } /* SpecialString */
    code span.st { color: #bae67e; } /* String */
    code span.va { color: #5ccfe6; } /* Variable */
    code span.vs { color: #bae67e; } /* VerbatimString */
    code span.wa { color: #f28779; } /* Warning */
  </style>
<link rel="stylesheet" href="PIR_quardo_files/libs/revealjs/dist/theme/quarto-2490efa8157309ca6a16a09f7caec705.css">
<link href="PIR_quardo_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
<link href="PIR_quardo_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
<link href="PIR_quardo_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
<link href="PIR_quardo_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
<style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center"><h1 class="title">Programming in R</h1>
  <p class="subtitle"><a href="">hyperlink to presentation</a></p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
fill presenter names here 
</div>
</div>
</div>

</section><section id="course-overview" class="title-slide slide level1 center"><h1>Course Overview</h1>
<ol type="1">
<li><a href="#/intro">Introduction</a></li>
<li><a href="#/objects">Objects in R</a></li>
<li><a href="#/graphics">Graphics</a></li>
<li><a href="#/dataanalysis">Data Analysis (dplyr)</a></li>
<li><a href="#/flowcontrol">Programming: Flow Control</a></li>
<li><a href="#/regression">Regressions</a></li>
<li><a href="#/efficiency">Efficiency</a></li>
</ol></section><section><section id="preliminary-remarks" class="title-slide slide level1 center"><h1>Preliminary Remarks</h1>

</section><section id="infrastructure" class="slide level2"><h2>Infrastructure</h2>
<p>You’ll need a</p>
<ul>
<li>Personal computer with a current installation of R and RStudio
<ul>
<li>Go to <a href="https://cran.r-project.org/">CRAN</a> to download the appropriate version for your operating system.</li>
<li>Follow the installation instructions provided on the website.</li>
<li>Install RStudio from <a href="https://posit.co/download/rstudio-desktop/">RStudio</a> for a user-friendly interface.</li>
</ul>
</li>
<li>Folder structure consistent with the course:
<ul>
<li><code>code/</code></li>
<li><code>RData/</code></li>
</ul>
</li>
</ul></section><section id="literaturelinks" class="slide level2"><h2>Literature/Links</h2>
<ul>
<li><p>Kleiber, C. &amp; Zeileis, A. (2008), <a href="https://www.springer.com/de/book/9780387773162">Applied Econometrics with R</a>, Springer.</p></li>
<li><p>Braun, J. &amp; Murdoch, D. (2021), <a href="https://www.murdoch-sutherland.com/StatProg3/index.html">A first course in statistical programming with R</a></p></li>
<li><p>Wickham, H. (2019) <a href="https://adv-r.hadley.nz/">Advanced R</a></p></li>
<li><p>Wickham, H. &amp; Grolemund, G. (2017), <a href="https://r4ds.had.co.nz/">R for Data Science</a></p></li>
<li><p>Verzani, J. (2014), <a href="https://www.crcpress.com/Using-R-for-Introductory-Statistics/Verzani/p/book/9781466590734">Using R for Introductory Statistics</a></p></li>
<li><p>Matloff, N. (2011), <a href="https://nostarch.com/artofr.htm">The Art of R Programming</a></p></li>
<li><p>Wickham, H. (2023) <a href="https://r-pkgs.org">R Packages</a></p></li>
<li><p>Course website: <a href="tbd">tbd</a></p></li>
<li><p><a href="https://www.r-project.org/">R project</a></p></li>
<li><p>Any further references?</p></li>
</ul></section><section id="learning-goals" class="slide level2"><h2>Learning Goals:</h2>
<ul>
<li>Introductory knowledge in R and RStudio</li>
<li>Sufficient knowledge to help yourself</li>
<li>Loading, describing and manipulating data</li>
<li>Descriptive statistics</li>
<li>Visualization</li>
<li>Model estimation</li>
<li>Baseline programming knowledge</li>
</ul></section><section id="exam" class="slide level2"><h2>Exam</h2>
<ul>
<li>Provide information about the exam here</li>
</ul></section></section><section><section id="intro" class="title-slide slide level1 center"><h1>1. Introduction</h1>

</section><section id="general-information" class="slide level2"><h2>General Information</h2>
<p><strong>R</strong> is…</p>
<ul>
<li>a free implementation of the <strong>S</strong> programming language with the goals:
<ul>
<li>Interactive data analysis</li>
<li>Making it easy for users to become programmers</li>
<li>Creating graphics for data analysis</li>
<li>Easy reusability of existing functions</li>
</ul>
</li>
<li>a <em>interpreted</em> language (interpreted by the R interpreter at runtime)</li>
<li>a <em>functional</em> language (functions are first-class objects)</li>
<li>an <em>object-oriented</em> language (classes and methods)</li>
<li>a <em>vectorized</em> language (objects are internally represented as vectors)</li>
</ul></section><section id="advantages-of-r" class="slide level2"><h2>Advantages of R</h2>
<ul>
<li>Free (open-source, GPL2/3) software; all code can be inspected and verified</li>
<li>Very close to (statistical) research</li>
<li>Easily extendable through packages</li>
<li>Runs on almost all platforms</li>
<li>Widely applied</li>
<li>Similar to other OOP languages in statistics (Python, Matlab, Julia)</li>
</ul></section><section id="disadvantages-of-r" class="slide level2"><h2>Disadvantages of R</h2>
<ul>
<li>No graphical user interface (but RStudio / Emacs + ESS / VS Code)</li>
<li>No interactive graphics (but Shiny)</li>
<li>Interpreted language, sometimes slower compared to compiled languages.</li>
<li>But: Compiled code (C/C++, Fortran) can be integrated to overcome this. Either via <code>Rcpp</code> (fast, user-friendly) or by calling C / Fortran routines directly (faster, less user-friendly)</li>
</ul></section><section id="first-steps" class="slide level2"><h2>First Steps</h2>
<ul>
<li>Input <em>expressions</em> into the R console (the interpreter), execute with <em>Return</em>
</li>
<li>Use arrow keys <em>(↑, ↓)</em> to recall previously entered <em>expressions</em>
</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="sc">&gt;</span> <span class="fu">sin</span>(<span class="dv">2</span><span class="sc">*</span>pi)</span>
<span id="cb1-2"><a href=""></a><span class="sc">&gt;</span> <span class="dv">2</span> <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb1-3"><a href=""></a><span class="sc">&gt;</span> <span class="dv">0</span><span class="sc">/</span><span class="dv">0</span>         <span class="co"># -&gt; NaN (not defined)</span></span>
<span id="cb1-4"><a href=""></a><span class="sc">&gt;</span> <span class="cn">Inf</span><span class="sc">-</span><span class="cn">Inf</span>     <span class="co"># -&gt; NaN (not defined)</span></span>
<span id="cb1-5"><a href=""></a><span class="sc">&gt;</span> <span class="dv">2</span> <span class="sc">+</span> <span class="dv">3</span><span class="sc">*</span><span class="dv">4</span>     <span class="co"># Operator precedence</span></span>
<span id="cb1-6"><a href=""></a><span class="sc">&gt;</span> <span class="dv">2</span> <span class="sc">+</span> </span>
<span id="cb1-7"><a href=""></a><span class="sc">+</span> <span class="dv">1</span>       <span class="co"># Execution only when expression is complete</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -2.449294e-16
[1] 1
[1] NaN
[1] NaN
[1] 14
[1] 3</code></pre>
</div>
</div>
</section><section id="graphs" class="slide level2"><h2>Graphs:</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb3-2"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">100</span>)</span>
<span id="cb3-3"><a href=""></a>y <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="at">sd =</span> <span class="fl">0.1</span>)</span>
<span id="cb3-4"><a href=""></a><span class="fu">plot</span>(x,y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="PIR_quardo_files/figure-revealjs/list2-1.png" class="quarto-figure quarto-figure-center r-stretch" width="672"></section><section class="slide level2"><p>While many simple calculations can be done using the command line, as soon as things get more complicated, <em>scripts</em> should be used.</p>
<p>A script is a text file (usually with a ‘.R’ file extension) that contains R code. For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href=""></a><span class="do">## Change working directory</span></span>
<span id="cb4-2"><a href=""></a><span class="fu">setwd</span>(<span class="st">"C:/Users/Max/R-Code"</span>)</span>
<span id="cb4-3"><a href=""></a></span>
<span id="cb4-4"><a href=""></a><span class="do">## Load data</span></span>
<span id="cb4-5"><a href=""></a>myData <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"all_important_data.csv"</span>,</span>
<span id="cb4-6"><a href=""></a>                     <span class="at">sep =</span> <span class="st">";"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-7"><a href=""></a></span>
<span id="cb4-8"><a href=""></a><span class="do">## Summary</span></span>
<span id="cb4-9"><a href=""></a><span class="fu">summary</span>(myData)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="editors" class="slide level2"><h2>Editors</h2>
<p>Text files are edited using text editors. There are several editors that make working with R easier:</p>
<ul>
<li>R-Studio (used in this course)
<ul>
<li>Closest to a GUI</li>
<li>Plots, overview of objects and packages in one window</li>
<li>Extra-click functions like loading data</li>
<li>Highly recommended for beginners</li>
</ul>
</li>
<li>Notepad++ in connection with npptor (Notepad++ to R)
<ul>
<li>Flexible editor for various programming languages, text files, etc. (one editor for multiple languages?)</li>
<li>Extremely functional as an editor: add-ons, macros, hotkeys, etc.</li>
<li>Comfortable indentation, highlighting, commenting and uncommenting</li>
</ul>
</li>
</ul></section><section class="slide level2"><ul>
<li>(X)Emacs with ESS / VS Code with R extension
<ul>
<li>Extremely versatile and powerful editor, though it requires some learning</li>
<li>Highly customizable</li>
<li>Works on all platforms</li>
<li>Suitable for various applications (LaTeX, email, git, etc.)</li>
</ul>
</li>
</ul></section><section id="rstudio" class="slide level2"><h2>RStudio</h2>
<ul>
<li>
<p>Structure: 4 windows</p>
<ul>
<li>Top left: Code editor, data.frame view (<strong>Ctrl + 1</strong>)</li>
<li>Bottom left: R console (<strong>Ctrl + 2</strong>)</li>
<li>Top right: Display of objects in the global environment (<strong>Ctrl + 8</strong>), history (<strong>Ctrl + 4</strong>)</li>
<li>Bottom right: Help (<strong>Ctrl + 3</strong>), plots (<strong>Ctrl + 6</strong>), packages (<strong>Ctrl + 7</strong>), etc.</li>
</ul>
</li>
<li><p>Individual windows can now also be detached from the main window</p></li>
<li>
<p>To execute code from the editor:</p>
<ul>
<li>Place the cursor in the respective line</li>
<li>Press <strong>Ctrl + Enter</strong> → Cursor jumps to the next line</li>
</ul>
</li>
</ul></section><section id="getting-help-on-a-topic" class="slide level2"><h2>Getting Help on a Topic</h2>
<p>To get help on a <em>known</em> function, you can either search for the function in the RStudio help tab or enter the following in the R console:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href=""></a>?getwd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br><img src="figures/getwd-help.png" style="width: 60%" align="center"></p>
</section><section id="getting-help-on-a-topic-1" class="slide level2"><h2>Getting Help on a Topic</h2>
<p>If you are looking for an <em>unknown</em> function (e.g., a function that performs a t-test), the best approach is to use Google, e.g.:</p>

<img src="figures/google-search.png" style="align:center;width: 100%" class="r-stretch"><p>As a more recent alternative, consult a LLM but make sure to check the proposed solution for errors</p>
</section><section id="getting-help-on-a-topic-2" class="slide level2"><h2>Getting Help on a Topic</h2>
<ul>
<li>Each package has its own documentation (includes help files), often with vignettes (more detailed explanations)</li>
<li>Stack Overflow</li>
<li>Mailing lists such as R-help</li>
</ul></section><section id="r-as-a-calculator" class="slide level2"><h2>R as a Calculator</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href=""></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">2</span>          <span class="co"># -&gt; 3</span></span>
<span id="cb6-2"><a href=""></a><span class="dv">1</span> <span class="sc">+</span> (<span class="dv">2</span> <span class="sc">*</span> <span class="dv">4</span>)    <span class="co"># -&gt; 9</span></span>
<span id="cb6-3"><a href=""></a>a <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb6-4"><a href=""></a>b <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">*</span> a     <span class="co"># -&gt; 9</span></span>
<span id="cb6-5"><a href=""></a><span class="fu">sqrt</span>(b)        <span class="co"># -&gt; 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Basic operators: +, -, *, /, ^</li>
<li>Extreme values: min(), max(), abs()</li>
<li>Square roots: sqrt()</li>
<li>Rounding: round(), floor(), ceil()</li>
<li>Trigonometric functions: sin(), cos(), tan(), asin(), acos(), atan()</li>
<li>Logarithms: log(), log2(), log10(), exp()</li>
<li>Sum, product: sum(), prod()</li>
</ul></section><section id="functions" class="slide level2"><h2>Functions</h2>
<p>Whenever something <em>happens</em>, functions are called. All operators, control flows, etc., are functions in R.</p>
<ul>
<li><p>A function is called by specifying the function name followed by one or more comma-separated arguments in parentheses: <code>function_name(argument1 = value1, argument2 = value2,...)</code></p></li>
<li><p>Argument names do not always need to be specified: <code>function_name(value1, value2,...)</code></p></li>
<li><p>Attention: Order matters!</p></li>
<li><p>There are also default arguments, which do not always need to be specified. More on this later.</p></li>
</ul></section><section id="assignment" class="slide level2"><h2>Assignment</h2>
<p>The symbol <code>&lt;-</code> is the assignment operator, storing the value of the expression on the right into the variable on the left:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href=""></a>a <span class="ot">&lt;-</span> (<span class="dv">3</span> <span class="sc">*</span> <span class="dv">4</span>)</span>
<span id="cb7-2"><a href=""></a>(<span class="dv">3</span> <span class="sc">*</span> <span class="dv">4</span>) <span class="ot">-&gt;</span> a    <span class="co"># Also possible but not recommended</span></span>
<span id="cb7-3"><a href=""></a>a <span class="ot">=</span> (<span class="dv">3</span> <span class="sc">*</span> <span class="dv">4</span>)     <span class="co"># Also frequently used but not equivalent to '&lt;-'</span></span>
<span id="cb7-4"><a href=""></a>a<span class="ot">&lt;-</span>(<span class="dv">3</span><span class="sc">*</span><span class="dv">4</span>)        <span class="co"># Poor readability</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>For readability, always include spaces around the assignment operator.</li>
<li>Variable names must start with a letter but may contain numbers, periods, and underscores.</li>
<li>It is recommended to use a consistent naming convention for objects — more on this later.</li>
</ul></section><section id="logical-operators" class="slide level2"><h2>Logical Operators</h2>
<ul>
<li>Comparison: ==, !=, &gt;, &lt;, &gt;=, &lt;=</li>
<li>Logical expressions: TRUE, T, FALSE, F, NA</li>
<li>Operators: ! (Negotiation), xor() (exclusive or), &amp; &amp;&amp; (and), | || (or), all(), any()</li>
</ul>
<p>Examples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a><span class="cn">TRUE</span> <span class="sc">&amp;</span> <span class="cn">FALSE</span>   <span class="co"># FALSE</span></span>
<span id="cb8-2"><a href=""></a><span class="cn">TRUE</span> <span class="sc">&amp;</span> <span class="cn">TRUE</span>    <span class="co"># TRUE</span></span>
<span id="cb8-3"><a href=""></a><span class="cn">TRUE</span> <span class="sc">|</span> <span class="cn">FALSE</span>   <span class="co"># TRUE</span></span>
<span id="cb8-4"><a href=""></a><span class="sc">!</span><span class="cn">TRUE</span> <span class="sc">|</span> <span class="cn">FALSE</span>  <span class="co"># FALSE</span></span>
<span id="cb8-5"><a href=""></a><span class="cn">FALSE</span> <span class="sc">&amp;&amp;</span> <span class="cn">TRUE</span>  <span class="co"># Second TRUE is not evaluated</span></span>
<span id="cb8-6"><a href=""></a><span class="cn">TRUE</span> <span class="sc">&amp;&amp;</span> <span class="cn">TRUE</span>   <span class="co"># Second TRUE is evaluated</span></span>
<span id="cb8-7"><a href=""></a><span class="cn">TRUE</span> <span class="sc">||</span> <span class="cn">FALSE</span>  <span class="co"># Second FALSE is not evaluated</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2"><p>More Examples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href=""></a><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>) <span class="sc">&amp;</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>)  <span class="co"># [1] TRUE FALSE   -&gt; Vectorized</span></span>
<span id="cb9-2"><a href=""></a><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>) <span class="sc">&amp;&amp;</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>) <span class="co"># [1] TRUE         -&gt; Not vectorized</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Quantifiers:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href=""></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb10-2"><a href=""></a>b <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb10-3"><a href=""></a><span class="fu">any</span>(a)         <span class="co"># [1] TRUE</span></span>
<span id="cb10-4"><a href=""></a><span class="fu">all</span>(a)         <span class="co"># [1] FALSE</span></span>
<span id="cb10-5"><a href=""></a><span class="fu">all</span>(b)         <span class="co"># [1] TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2"><p>Missing Values:</p>
<p>Testing for <code>NA</code> is only possible with <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code>. <code>x == NA</code> always returns <code>NA</code>!</p>
<p>Examples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href=""></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">NA</span>, <span class="cn">TRUE</span>)</span>
<span id="cb11-2"><a href=""></a>a <span class="sc">==</span> <span class="cn">NA</span>           <span class="co"># [1] NA NA NA</span></span>
<span id="cb11-3"><a href=""></a><span class="fu">is.na</span>(a)          <span class="co"># [1] FALSE TRUE FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="useful-functions" class="slide level2"><h2>Useful Functions:</h2>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/ls.html">ls()</a></code> displays existing objects in the global environment</li>
<li>
<code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> shows the structure of an object</li>
<li>
<code><a href="https://rdrr.io/r/base/rm.html">rm()</a></code> removes an object from the global workspace</li>
<li>
<code><a href="https://rdrr.io/r/base/getwd.html">getwd()</a></code> displays the current working directory</li>
<li>
<code><a href="https://rdrr.io/r/base/getwd.html">setwd()</a></code> changes the working directory
<ul>
<li>On Windows, the path separator is either <code>/</code> or <code>\\</code>
</li>
<li>On Linux/Mac, always <code>/</code>
</li>
</ul>
</li>
<li>
<code><a href="https://rdrr.io/r/base/save.html">save()</a></code> saves objects as an <code>.RData</code> file</li>
<li>
<code><a href="https://rdrr.io/r/base/load.html">load()</a></code> loads objects into the global environment</li>
<li>
<code><a href="https://rdrr.io/r/base/list.files.html">list.files()</a></code> shows files in the specified directory</li>
<li>
<code><a href="https://rdrr.io/r/base/source.html">source()</a></code> runs an R script</li>
</ul></section><section id="extending-r-with-packages" class="slide level2"><h2>Extending R with Packages</h2>
<p>There are many packages available on <a href="https://cran.r-project.org/">CRAN</a> for various applications. These allow for expanding the relatively small core system of R. While R comes with some standard packages, many need to be installed separately.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"AER"</span>)  <span class="co"># Install a previously unavailable package</span></span>
<span id="cb12-2"><a href=""></a><span class="fu">library</span>(AER)             <span class="co"># Load the package (makes objects </span></span>
<span id="cb12-3"><a href=""></a>                         <span class="co"># in the package visible in the</span></span>
<span id="cb12-4"><a href=""></a>                         <span class="co"># global namespace)</span></span>
<span id="cb12-5"><a href=""></a><span class="fu">data</span>(CASchools)          <span class="co"># Example dataset "CASchools"</span></span>
<span id="cb12-6"><a href=""></a>?ivreg                   <span class="co"># Help for function ivreg</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/search.html">search()</a></code> shows the search path, i.e., which packages are already loaded:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href=""></a><span class="fu">search</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] ".GlobalEnv"        "package:stats"     "package:graphics" 
[4] "package:grDevices" "package:utils"     "package:datasets" 
[7] "package:methods"   "Autoloads"         "package:base"     </code></pre>
</div>
</div>
</section><section id="task-1.1" class="slide level2"><h2>Task 1.1</h2>
<p>Create a file <code>test.R</code> in your <code>codes</code> folder. This file should contain a script that creates the object <code>x</code> assigned to <code>5</code> and the object <code>y</code> assigned to <code>6</code>. Before sourcing this <code>test.R</code> file using the <code>source</code> function, clear your entire workspace. Then, inspect the workspace, compute the product of the two numbers, delete the object <code>x</code>, and save the remaining workspace in <code>.RData</code> format in the “RData” folder.</p>
<p><strong>Note:</strong> In general, it is wise to avoid frequently changing the working directory. Instead, simply use the <code>source</code> function on the explicit code folder.</p>
</section><section id="task-1.2" class="slide level2"><h2>Task 1.2</h2>
<p>Test R as a calculator: 1. Compute the value of the sine function at <code>0</code>. 2. Define <code>x</code> as <code>2</code> and compute its double third power.</p>
</section><section id="task-1.3" class="slide level2"><h2>Task 1.3</h2>
<p>Find an R package that provides functions to test linear hypotheses in multiple regression models. Install the package and check the help documentation for one of its functions.</p>
</section><section id="task-1.4" class="slide level2"><h2>Task 1.4</h2>
<ol type="1">
<li>Compute the following:
<ul>
<li>The cube root of 27.</li>
<li>The exponential of 3.</li>
<li>The tangent of π/6.</li>
</ul>
</li>
<li>Use logical operators to evaluate:
<ul>
<li>10 &lt;= 15 &amp; 5 &gt; 3</li>
<li>!(7 != 7)</li>
<li>c(TRUE, FALSE, TRUE) &amp; c(FALSE, TRUE, TRUE)</li>
</ul>
</li>
</ol></section><section id="task-1.5" class="slide level2"><h2>Task 1.5</h2>
<ol type="1">
<li>Assign the value 42 to a variable named answer. Then, multiply it by 2 and store the result in a new variable double_answer.</li>
<li>Create a variable name with the value “R Programming”. Use the paste() function to combine it with “is fun!”.</li>
<li>Swap the values of two variables a = 5 and b = 10 without using a temporary variable.</li>
</ol></section><section id="task-1.6" class="slide level2"><h2>Task 1.6</h2>
<ol type="1">
<li>Use the help() function to find information about the lm() function.</li>
<li>Now, use google to find out how to apply the lm() function.</li>
<li>Use a LLM of your choice to generate a summary of the lm() function.</li>
</ol></section></section><section><section id="objects" class="title-slide slide level1 center"><h1>2. Objects in R</h1>

</section><section id="objects-in-r" class="slide level2"><h2>Objects in R</h2>
<ul>
<li>Everything that exists in R (objects) is either data (a structure) or a function.</li>
<li>Objects each have a class (object orientation).</li>
</ul></section><section id="first-important-object-functions" class="slide level2"><h2>First Important Object: Functions</h2>
<p>A function is a programming construct that executes a procedure on provided objects and returns a result.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href=""></a><span class="fu">log</span>(<span class="fl">2.3</span>)</span>
<span id="cb15-2"><a href=""></a><span class="fu">sin</span>(<span class="dv">2</span>)</span>
<span id="cb15-3"><a href=""></a><span class="fu">class</span>(log)</span>
<span id="cb15-4"><a href=""></a><span class="fu">class</span>(<span class="fl">2.3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8329091
[1] 0.9092974
[1] "function"
[1] "numeric"</code></pre>
</div>
</div>
</section><section id="functions-1" class="slide level2"><h2>Functions</h2>
<p>There are functions with and without side effects:</p>
<ul>
<li>Functions <strong>without</strong> side effects take objects as input, perform an operation, and return the result. Example: <code><a href="https://rdrr.io/r/base/Log.html">log()</a></code>
</li>
<li>Functions <strong>with</strong> side effects modify objects in the global workspace. Example: <code><a href="https://rdrr.io/r/base/getwd.html">setwd()</a></code>, <code><a href="https://rdrr.io/r/base/assignOps.html">'&lt;-'()</a></code> (assignment is also a function!)</li>
</ul>
<p><span class="math inline">\(\Rightarrow\)</span> When developing functions, side effects should be avoided unless explicitly desired.</p>
</section><section id="defining-a-function" class="slide level2"><h2>Defining a Function</h2>
<p>A function is defined as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href=""></a><span class="do">## Simple function</span></span>
<span id="cb17-2"><a href=""></a>product1 <span class="ot">&lt;-</span> <span class="cf">function</span>(x1, x2) x1 <span class="sc">*</span> x2</span>
<span id="cb17-3"><a href=""></a></span>
<span id="cb17-4"><a href=""></a><span class="do">## With preset arguments</span></span>
<span id="cb17-5"><a href=""></a>product2 <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">x1 =</span> <span class="dv">1</span>, <span class="at">x2 =</span> <span class="dv">2</span>) x1 <span class="sc">*</span> x2</span>
<span id="cb17-6"><a href=""></a></span>
<span id="cb17-7"><a href=""></a><span class="do">## Curly braces often used for function bodies</span></span>
<span id="cb17-8"><a href=""></a>product3 <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">x1 =</span> <span class="dv">1</span>, <span class="at">x2 =</span> <span class="dv">2</span>){</span>
<span id="cb17-9"><a href=""></a>  x1 <span class="sc">*</span> x2</span>
<span id="cb17-10"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>In the example above, curly braces are not necessary. However, they should be used when a function performs multiple operations.</li>
</ul></section><section id="calling-a-function" class="slide level2"><h2>Calling a Function</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href=""></a>product1                      <span class="co"># Display function definition</span></span>
<span id="cb18-2"><a href=""></a><span class="fu">product1</span>()                    <span class="co"># Calling function without arguments produces an error</span></span>
<span id="cb18-3"><a href=""></a><span class="fu">product1</span>(<span class="at">x1=</span><span class="dv">2</span>, <span class="at">x2=</span><span class="dv">5</span>)</span>
<span id="cb18-4"><a href=""></a><span class="fu">product1</span>(<span class="at">x1=</span><span class="dv">2</span>, <span class="at">x2=</span><span class="dv">5</span>, <span class="at">y=</span><span class="dv">5</span>)     <span class="co"># Function expects exactly 2 arguments, providing 3 will cause an error</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>What happens when the function is called?</strong></p>
<p><code>product1(x1 = 1,x2 = 2)</code></p>
<p>At runtime, a new environment is created, containing two variables: <code>x1</code> with value <code>1</code> and <code>x2</code> with value <code>2</code>. These are used to compute the product, which is then returned.</p>
</section><section class="slide level2"><p>Not all functions require arguments, e.g., <code><a href="https://rdrr.io/r/base/getwd.html">getwd()</a></code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href=""></a>f2 <span class="ot">&lt;-</span> <span class="cf">function</span>() x1 <span class="sc">*</span> x2</span>
<span id="cb19-2"><a href=""></a>x1 <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb19-3"><a href=""></a>x2 <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb19-4"><a href=""></a>f2              <span class="co"># Display function definition</span></span>
<span id="cb19-5"><a href=""></a><span class="fu">f2</span>()            <span class="co"># Call function</span></span>
<span id="cb19-6"><a href=""></a><span class="fu">f2</span>(<span class="at">x1=</span><span class="dv">2</span>)        <span class="co"># Produces an error, f2 does not accept arguments</span></span>
<span id="cb19-7"><a href=""></a><span class="fu">f2</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Since <code>f2</code> has no arguments, <code>x1</code> and <code>x2</code> are searched in the next higher environment.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href=""></a><span class="fu">rm</span>(x1,x2)</span>
<span id="cb20-2"><a href=""></a><span class="fu">f2</span>()            <span class="co"># Error</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="more-complex-function-example" class="slide level2"><h2>More complex Function Example</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href=""></a>f4 <span class="ot">&lt;-</span> <span class="cf">function</span>(x1,x2) {</span>
<span id="cb21-2"><a href=""></a>    z <span class="ot">&lt;-</span> x1 <span class="sc">+</span> x2</span>
<span id="cb21-3"><a href=""></a>    abc <span class="ot">&lt;-</span> x1<span class="sc">/</span>z</span>
<span id="cb21-4"><a href=""></a>    <span class="fu">return</span>(abc)     <span class="co"># return exits the function</span></span>
<span id="cb21-5"><a href=""></a>}</span>
<span id="cb21-6"><a href=""></a><span class="fu">f4</span>(<span class="dv">1</span>,<span class="dv">2</span>)             <span class="co"># -&gt; 0.3333333</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="special-argument-the-three-dots-argument-..." class="slide level2"><h2>Special Argument: The “Three Dots” Argument (<code>...</code>)</h2>
<p>A special argument in R is the “three dots” argument (<code>...</code>). This allows arguments to be passed flexibly:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href=""></a>f5 <span class="ot">&lt;-</span> <span class="cf">function</span>(e, ...) {</span>
<span id="cb22-2"><a href=""></a>    <span class="fu">log</span>(e, ...)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb22-3"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>All arguments that <code>f5</code> does not explicitly use are passed to <code><a href="https://rdrr.io/r/base/Log.html">log()</a></code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href=""></a><span class="fu">f5</span>(<span class="dv">5</span>)</span>
<span id="cb23-2"><a href=""></a><span class="fu">log</span>(<span class="dv">5</span>, <span class="at">base=</span><span class="dv">10</span>)<span class="sc">^</span><span class="dv">2</span>             <span class="co"># log() also has an argument "base"</span></span>
<span id="cb23-3"><a href=""></a><span class="fu">f5</span>(<span class="dv">5</span>, <span class="at">base =</span> <span class="dv">10</span>)              <span class="co"># Passed to log()</span></span>
<span id="cb23-4"><a href=""></a><span class="fu">f5</span>(<span class="dv">5</span>, <span class="at">base =</span> <span class="dv">10</span>, <span class="at">arg3 =</span> <span class="st">"a"</span>)  <span class="co"># arg3 is not recognized by log()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="functions-that-call-methods" class="slide level2"><h2>Functions That Call Methods</h2>
<p>Some functions, such as <code><a href="https://rdrr.io/r/base/print.html">print()</a></code>, <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>, and <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code>, call methods. These perform different operations depending on the class of the passed object.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href=""></a><span class="fu">plot</span>(cos, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>)    <span class="co"># 'plot' applied to function 'cos'</span></span>
<span id="cb24-2"><a href=""></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb24-3"><a href=""></a>y <span class="ot">&lt;-</span> <span class="dv">6</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb24-4"><a href=""></a><span class="fu">plot</span>(x, y)          <span class="co"># 'plot' applied to two vectors 'x' and 'y'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>R has two (recently three) class systems: S3, S4, and Reference Classes (the latter being closest to object-oriented programming).</p>
</section><section id="summary-functions" class="slide level2"><h2>Summary: Functions</h2>
<p>All objects that are not data are functions.</p>
<p>What you should now know:</p>
<ul>
<li>Function name, function body, function definition</li>
</ul>
<p>For the source code of a function (R is NOT a black box!), Uwe Ligges’ <a href="https://cran.r-project.org/doc/Rnews/Rnews_2006-4.pdf">article in R News (p.&nbsp;43)</a> is a great reference.</p>
<p>“When looking at R source code, sometimes calls to one of the following functions show up: <code><a href="https://rdrr.io/r/base/Foreign.html">.C()</a></code>, <code><a href="https://rdrr.io/r/base/CallExternal.html">.Call()</a></code>, <code><a href="https://rdrr.io/r/base/Foreign.html">.Fortran()</a></code>, <code><a href="https://rdrr.io/r/base/CallExternal.html">.External()</a></code>, or <code><a href="https://rdrr.io/r/base/Internal.html">.Internal()</a></code> and <code><a href="https://rdrr.io/r/base/Primitive.html">.Primitive()</a></code>. These functions call entry points in compiled code such as shared objects, static libraries, or dynamic link libraries. Therefore, it is necessary to look into the sources of the compiled code if complete understanding of the code is required. … The first step is to look up the entry point in file <code>$R HOME/src/main/names.c</code>, if the calling R function is either <code><a href="https://rdrr.io/r/base/Primitive.html">.Primitive()</a></code> or <code><a href="https://rdrr.io/r/base/Internal.html">.Internal()</a></code>.”</p>
</section><section id="task-2.1" class="slide level2"><h2>Task 2.1</h2>
<ol type="1">
<li><p>Create a function named <code>getSquaredSum</code> that takes two numbers as input, calculates their squared sum, and returns it. Test this function in two ways. Then, set the second function argument to default to <code>0</code>.</p></li>
<li><p>Create a function in which another function is defined and then called within the function body. Now define the “inner function” outside of the “outer function.” Which approach do you prefer? Check if everything works and produces the same results!</p></li>
</ol></section><section id="atomic-data-types" class="slide level2"><h2>Atomic Data Types</h2>
<p>All complex data types (vectors, matrices, lists, etc.) in R are built from atomic data types:</p>
<ul>
<li>
<code>NULL</code>: the empty set</li>
<li>
<code>logical</code>: logical values</li>
<li>
<code>integer</code>: whole numbers</li>
<li>
<code>numeric</code>: real numbers</li>
<li>
<code>complex</code>: complex numbers</li>
<li>
<code>character</code>: letters and strings</li>
<li>For more, see <code><a href="https://rdrr.io/r/base/typeof.html">?typeof</a></code>
</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href=""></a><span class="fu">typeof</span>(<span class="fl">2.3</span>)    <span class="co"># numeric</span></span>
<span id="cb25-2"><a href=""></a><span class="fu">typeof</span>(<span class="cn">TRUE</span>)   <span class="co"># logical</span></span>
<span id="cb25-3"><a href=""></a><span class="fu">typeof</span>(<span class="st">"abc"</span>)  <span class="co"># character</span></span>
<span id="cb25-4"><a href=""></a><span class="fu">typeof</span>(log)    <span class="co"># special</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="atomic-data-type-functions" class="slide level2"><h2>Atomic Data Type Functions</h2>
<p>For each atomic data type, there is a function to check if an object belongs to that type, as well as a function to convert (if possible) into the respective type:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href=""></a><span class="fu">is.numeric</span>(<span class="dv">1</span>)       <span class="co"># TRUE</span></span>
<span id="cb26-2"><a href=""></a><span class="fu">as.numeric</span>(<span class="st">"2.3"</span>)   <span class="co"># 2.3</span></span>
<span id="cb26-3"><a href=""></a><span class="fu">as.character</span>(<span class="fl">2.3</span>)   <span class="co"># "2.3"</span></span>
<span id="cb26-4"><a href=""></a><span class="fu">is.null</span>(<span class="cn">NULL</span>)       <span class="co"># TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="vectors" class="slide level2"><h2>Vectors</h2>
<p>Vectors are the fundamental structure in R and consist of multiple elements of an atomic data type. The function <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> is used to create vectors:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">2.3</span>, <span class="dv">5</span>, <span class="dv">1</span>)</span>
<span id="cb27-2"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, x)      <span class="co"># new vector from an existing vector</span></span>
<span id="cb27-3"><a href=""></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Test"</span>, <span class="st">"Hello"</span>)</span>
<span id="cb27-4"><a href=""></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(y, x)            <span class="co"># everything converts to 'character', the "lowest" data type</span></span>
<span id="cb27-5"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(x, <span class="cn">NA</span>)           <span class="co"># but: NA does not change the type!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2"><p>Other ways to create vectors:</p>
<ul>
<li>Integer sequences: <code>1:5</code>, alternatively: <code>seq(1,5)</code>
</li>
<li>Arbitrary sequences: <code>seq(from, to, by)</code>
</li>
<li>Repetitions: <code><a href="https://rdrr.io/r/base/rep.html">rep()</a></code>
</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href=""></a><span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>              <span class="co"># -&gt; 2,3,4</span></span>
<span id="cb28-2"><a href=""></a><span class="fu">seq</span>(<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">2</span>)       <span class="co"># -&gt; 2,4,6,8</span></span>
<span id="cb28-3"><a href=""></a><span class="fu">rep</span>(<span class="dv">2</span>, <span class="dv">4</span>)        <span class="co"># -&gt; 2,2,2,2</span></span>
<span id="cb28-4"><a href=""></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb28-5"><a href=""></a><span class="fu">rep</span>(x, <span class="dv">2</span>)        <span class="co"># -&gt; 1,2,3,1,2,3</span></span>
<span id="cb28-6"><a href=""></a><span class="fu">rep</span>(x, <span class="at">each =</span> <span class="dv">2</span>) <span class="co"># -&gt; 1,1,2,2,3,3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Individual elements in vectors can also be named:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">one =</span> <span class="fl">2.4</span>, <span class="at">two =</span> <span class="dv">3</span>, <span class="at">three =</span> <span class="dv">4</span>, <span class="at">last =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="vector-arithmetic" class="slide level2"><h2>Vector Arithmetic</h2>
<p>Since R is a vectorized language, all elementary arithmetic operations are vectorized:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href=""></a><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>) <span class="sc">+</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>)  <span class="co"># -&gt; 2,3,4</span></span>
<span id="cb30-2"><a href=""></a><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>) <span class="sc">*</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>)      <span class="co"># -&gt; 1,8</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Warning: If vectors have different lengths, the shorter one is recycled to match the longer one. If the lengths do not align perfectly, a warning is issued:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href=""></a><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>) <span class="sc">*</span> <span class="dv">2</span>         <span class="co"># 2,4,6 -&gt; second object is converted to c(2,2,2)</span></span>
<span id="cb31-2"><a href=""></a><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>) <span class="sc">*</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)    <span class="co"># 2,6,8 -&gt; with a warning</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="vector-indexing" class="slide level2"><h2>Vector Indexing</h2>
<p>To access individual elements in a vector, indexing can be used. For example, the fourth element of vector <code>x</code> is accessed with <code>x[4]</code>. Different indexing methods include:</p>
<ul>
<li>Numeric indexing (also with a vector): <code>x[c(2,3,7)]</code> selects the 2nd, 3rd, and 7th elements of <code>x</code>.</li>
<li>Logical indexing: <code>x[c(TRUE, FALSE, TRUE, FALSE, FALSE)]</code> selects the 1st and 3rd elements of <code>x</code> (if <code>x</code> has five elements).</li>
<li>Named indexing: Named vectors can be accessed using names: <code>x["one"]</code> selects the element named “one”.</li>
<li>Negative indexing: <code>x[-1]</code> selects all elements except the first.</li>
<li>Conditional indexing: <code>x[ x &gt; 2 ]</code> selects all elements greater than 2 (if <code>x</code> is numeric).</li>
</ul></section><section id="useful-vector-functions" class="slide level2"><h2>Useful Vector Functions</h2>
<ul>
<li>sort: sort()</li>
<li>revert: rev()</li>
<li>rank: rank()</li>
<li>order (index): order()</li>
<li>exact identical check: identical()</li>
<li>numerical equality: all.equal()</li>
<li>delete duplicaes: unique()</li>
<li>check for duplicates: duplicated()</li>
<li>which elements satisfy condition: which()</li>
</ul></section><section id="task-2.2" class="slide level2"><h2>Task 2.2</h2>
<p>Write a function that calculates the sum of two vectors and returns the result as a string in the format:</p>
<p>“The sum is [value]”.</p>
<p>Test the function with the following vectors:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href=""></a>xy <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb32-2"><a href=""></a>yx <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Hint: Check the help for the <code><a href="https://rdrr.io/r/base/paste.html">paste()</a></code> function.</p>
</section><section id="matrices" class="slide level2"><h2>Matrices</h2>
<p>Matrices are created using the function <code>matrix(data= NA, ncol=1, nrow =1, byrow = FALSE)</code>. Example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href=""></a><span class="fu">matrix</span>(<span class="at">data =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">nrow =</span> <span class="dv">3</span>) <span class="co"># Columns are filled first, then rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9</code></pre>
</div>
</div>
<p>If <code>data</code> is not long enough, it is recycled:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href=""></a><span class="fu">matrix</span>(<span class="at">data =</span> <span class="dv">1</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">nrow =</span> <span class="dv">3</span>) <span class="co"># Columns are filled first, then rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    1    1
[2,]    1    1    1
[3,]    1    1    1</code></pre>
</div>
</div>
</section><section id="matrices-1" class="slide level2"><h2>Matrices</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href=""></a><span class="fu">matrix</span>(<span class="at">data =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">nrow =</span> <span class="dv">3</span>) <span class="co"># Columns are filled first, then rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    2    1
[2,]    2    1    2
[3,]    1    2    1</code></pre>
</div>
</div>
<p>Filling by rows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href=""></a><span class="fu">matrix</span>(<span class="at">data =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    4    5    6
[3,]    7    8    9</code></pre>
</div>
</div>
</section><section id="matrix-indexing" class="slide level2"><h2>Matrix Indexing</h2>
<p>Indexing matrices is similar to vector indexing (numeric, logical, by name, etc.), but requires both row and column indices:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb41-2"><a href=""></a>x[<span class="dv">1</span>,<span class="dv">3</span>]    <span class="co"># Element in row 1, column 3</span></span>
<span id="cb41-3"><a href=""></a>x[<span class="dv">1</span>,]     <span class="co"># Returns first row (as a vector)</span></span>
<span id="cb41-4"><a href=""></a>x[,<span class="dv">2</span>]     <span class="co"># Returns second column (as a vector)</span></span>
<span id="cb41-5"><a href=""></a>x[,<span class="dv">2</span>, drop <span class="ot">=</span> <span class="cn">FALSE</span>] <span class="co"># Returns second column (as a 3x1 matrix)</span></span>
<span id="cb41-6"><a href=""></a>x[x<span class="sc">&gt;</span><span class="dv">2</span>]    <span class="co"># Elements greater than 2 (as a vector)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/cbind.html">cbind()</a></code> and <code><a href="https://rdrr.io/r/base/cbind.html">rbind()</a></code> allow matrices to be stacked column-wise or row-wise.</li>
<li>
<code><a href="https://rdrr.io/r/base/dim.html">dim()</a></code> returns the number of elements in each dimension.</li>
</ul></section><section id="useful-matrix-functions" class="slide level2"><h2>Useful Matrix Functions</h2>
<ul>
<li>Multiplication: %*%</li>
<li>Choleski decomposition: chol()</li>
<li>Return / replace diagonal: diag()</li>
<li>Row / column names: dimnames()</li>
<li>Eigendecomposition: eigen()</li>
<li>Dimensions: dim(), nrow(), ncol()</li>
<li>QR decomposition: qr()</li>
<li>Inverse: solve()</li>
<li>Singular value decomposition: svd()</li>
<li>Transpose: t()</li>
</ul></section><section id="arrays" class="slide level2"><h2>Arrays</h2>
<p>Matrices have two dimensions. A generalization to multiple dimensions is an array, created with the function <code>array(data, dim)</code>, where <code>dim</code> is a vector specifying the number of elements in each dimension:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href=""></a><span class="fu">array</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>, <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This creates an array with dimensions <span class="math inline">\(3 \times 3 \times 5\)</span>.</p>
<ul>
<li>Indexing works the same way as for matrices.</li>
<li>Arithmetic operations are applied element-wise:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href=""></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">nrow =</span> <span class="dv">2</span>)</span>
<span id="cb43-2"><a href=""></a>A<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    9   25
[2,]    4   16   36</code></pre>
</div>
</div>
</section><section id="task-2.3" class="slide level2"><h2>Task 2.3</h2>
<p>For the matrix <code>A = Mat_A</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href=""></a>Mat_A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>and the vector <code>b = vec_b</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href=""></a>vec_b <span class="ot">&lt;-</span> <span class="dv">12</span><span class="sc">:</span><span class="dv">14</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Compute the matrix product <span class="math inline">\(A \cdot b\)</span> and the element-wise product. Explain the differences.</p>
</section><section id="task-2.4" class="slide level2"><h2>Task 2.4</h2>
<p>Define the vector <span class="math inline">\(y = (3,5,2,8,6,4,7)'\)</span> and the matrix <span class="math inline">\(X\)</span>, where the first column consists of ones and the second column contains <span class="math inline">\((4,3,7,1,3,7,5)'\)</span>.</p>
<ol type="1">
<li>Extract the third observation from <code>X</code> and <code>y</code>.</li>
<li>Compute <span class="math inline">\(X'X\)</span>, <span class="math inline">\(X'y\)</span>, <span class="math inline">\((X'X)^{-1}\)</span>, and the OLS estimator of the linear regression model. <strong>Hint:</strong> The formula for the OLS estimator is <span class="math inline">\(\hat{\beta} = (X'X)^{-1}X'y\)</span>.</li>
<li>Compute the standard errors of the coefficients under standard assumptions.</li>
<li>Create a function that takes <code>y</code> and <code>X</code> and returns a matrix containing the OLS estimates and their standard errors as columns.</li>
</ol></section><section id="task-2.5" class="slide level2"><h2>Task 2.5</h2>
<p>Add the following matrix to your R environment <span class="math display">\[A = \begin{pmatrix}
1.0 &amp;  0.5\\
0.5 &amp; 1.0
\end{pmatrix}.\]</span> Calculate the eigendecomposition <span class="math inline">\(V\cdot \Lambda\cdot V^{-1}\)</span> of <span class="math inline">\(A\)</span>, where <span class="math inline">\(\Lambda\)</span> is a diagonal matrix holding the eigenvalues, and <span class="math inline">\(V\)</span> is a matrix of eigenvectors. Check whether the above product equals <span class="math inline">\(A\)</span>.</p>
</section><section id="task-2.6" class="slide level2"><h2>Task 2.6</h2>
<ol type="1">
<li><p>When optimization involves a non-diagonal covariance matrix <span class="math inline">\(Q\)</span>, one needs to ensure <span class="math inline">\(Q\)</span> is symmetric p.s.d., which limits the parameter space of the optimization problem. Write a bijective function <span class="math inline">\(Q = f(\theta)\)</span> that maps a three-dimensional parameter vector <span class="math inline">\(\theta \in \mathbb{R}^3\)</span> to the <span class="math inline">\(2 \times 2\)</span> covarinace matrix <span class="math inline">\(Q\)</span>, <span class="math inline">\(f: \theta \rightarrow Q\)</span>, ensuring <span class="math inline">\(Q\)</span> is symmetric p.s.d.</p></li>
<li><p>Write the inverse function <span class="math inline">\(f^{-1}: Q \rightarrow \theta\)</span></p></li>
<li><p>Use a LLM to solve the two tasks and check with your solution. What prompt do you use? Do you get the same results?</p></li>
</ol></section><section id="lists" class="slide level2"><h2>Lists</h2>
<p>Vectors, matrices, and arrays require all elements to be of the same data type. Lists, however, are more general as they allow arbitrary combinations of data types. A list is created using the <code><a href="https://rdrr.io/r/base/list.html">list()</a></code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href=""></a>L1 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb47-2"><a href=""></a>  <span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,</span>
<span id="cb47-3"><a href=""></a>  <span class="at">A =</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>,<span class="dv">3</span>,<span class="dv">3</span>),</span>
<span id="cb47-4"><a href=""></a>  <span class="at">w =</span> <span class="st">"Hello!"</span>        <span class="co"># Elements can have names AND be of any type!</span></span>
<span id="cb47-5"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Lists can also contain other lists:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href=""></a>L2 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb48-2"><a href=""></a>  <span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,</span>
<span id="cb48-3"><a href=""></a>  <span class="at">l1 =</span> L1 <span class="co"># List within a list</span></span>
<span id="cb48-4"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="lists-1" class="slide level2"><h2>Lists</h2>
<p>Lists are indexed using double square brackets (numeric, logical, by name):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href=""></a>L1[[<span class="dv">1</span>]]    <span class="co"># 1,2,3     -&gt; Vector</span></span>
<span id="cb49-2"><a href=""></a>L1[<span class="dv">1</span>]      <span class="co"># list(1:3) -&gt; Still a list (sublist of L1)</span></span>
<span id="cb49-3"><a href=""></a>L1[[<span class="st">"w"</span>]]  <span class="co"># "Hello!"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Named lists can also be accessed using the <code>$</code> operator:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href=""></a>L1<span class="sc">$</span>w       <span class="co"># "Hello!"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="task-2.7" class="slide level2"><h2>Task 2.7</h2>
<ul>
<li>Create your own list with three different data types and names.</li>
<li>Use both numeric indexing and name-based indexing.</li>
<li>Apply the <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> function to your list.</li>
<li>Create a list of lists of lists.</li>
</ul></section><section id="dataframes" class="slide level2"><h2>Dataframes</h2>
<p>Dataframes are lists whose elements are vectors of the same length but not necessarily of the same data type. Typically, datasets in R are stored in dataframes.</p>
<p>Dataframes are created using <code><a href="https://rdrr.io/r/base/data.frame.html">data.frame()</a></code> and can be indexed both like matrices and like lists.</p>
<p>Examples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href=""></a>Players <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb51-2"><a href=""></a>  <span class="at">FirstName =</span> <span class="fu">c</span>(<span class="st">"Joren"</span>,<span class="st">"Ozgur"</span>,<span class="st">"Bryan"</span>,<span class="st">"Camil"</span>),</span>
<span id="cb51-3"><a href=""></a>  <span class="at">LastName =</span>  <span class="fu">c</span>(<span class="st">"Op de Beeck"</span>,<span class="st">"Aktas"</span>,<span class="st">"Smeets"</span>,<span class="st">"Mmaee"</span>),</span>
<span id="cb51-4"><a href=""></a>  <span class="at">Position =</span> <span class="fu">c</span>(<span class="st">"Goalkeeper"</span>,<span class="st">"Defender"</span>,<span class="st">"Midfielder"</span>,<span class="st">"Forward"</span>),</span>
<span id="cb51-5"><a href=""></a>  <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">19</span>,<span class="dv">28</span>,<span class="dv">32</span>,<span class="dv">20</span>),</span>
<span id="cb51-6"><a href=""></a>  <span class="at">Number =</span> <span class="fu">c</span>(<span class="dv">23</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">7</span>),</span>
<span id="cb51-7"><a href=""></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>      <span class="co"># Names should be read as "character"</span></span>
<span id="cb51-8"><a href=""></a>                                <span class="co"># and not as "factor"</span></span>
<span id="cb51-9"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="dataframes-1" class="slide level2"><h2>Dataframes</h2>
<p>Indexing:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href=""></a><span class="fu">names</span>(Players)       <span class="co"># Variable names</span></span>
<span id="cb52-2"><a href=""></a>Players<span class="sc">$</span>FirstName    <span class="co"># Indexing like a list ($)</span></span>
<span id="cb52-3"><a href=""></a>Players[,<span class="dv">1</span>]          <span class="co"># Numeric indexing like a matrix</span></span>
<span id="cb52-4"><a href=""></a>Players[,<span class="st">"FirstName"</span>] <span class="co"># Name-based indexing</span></span>
<span id="cb52-5"><a href=""></a></span>
<span id="cb52-6"><a href=""></a>Players[Players<span class="sc">$</span>LastName<span class="sc">==</span><span class="st">"Smeets"</span> , ] <span class="co"># Logical indexing</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To add variables to the dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href=""></a>Players<span class="sc">$</span>Gender <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"m"</span>, <span class="st">"m"</span>, <span class="st">"m"</span>, <span class="st">"m"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="dataframes-2" class="slide level2"><h2>Dataframes</h2>
<p>Often, you want to select specific observations from a dataset. The <code><a href="https://rdrr.io/r/base/subset.html">subset()</a></code> function is useful for this, along with the <code>%in%</code> operator:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href=""></a><span class="fu">subset</span>(Players, FirstName <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Joren"</span>, <span class="st">"Bryan"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Later, we will explore functions from the <code>dplyr</code> package, which provide more flexibility for selections.</p>
<p>Other useful functions for <code>data.frames</code>:</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>: Outputs summary statistics for each variable</li>
<li>
<code><a href="https://rdrr.io/r/utils/head.html">head()</a></code>: Displays the first few rows</li>
<li>
<code><a href="https://rdrr.io/r/utils/head.html">tail()</a></code>: Displays the last few rows</li>
<li>
<code><a href="https://rdrr.io/r/base/attach.html">attach()</a></code>: Makes dataset variables visible in the global workspace</li>
<li>
<code><a href="https://rdrr.io/r/base/split.html">split()</a></code>: Splits the dataset into subsets</li>
<li>
<code><a href="https://rdrr.io/r/base/merge.html">merge()</a></code>: Merges two datasets with different variables</li>
</ul></section><section id="task-2.8" class="slide level2"><h2>Task 2.8</h2>
<p>Use the <code>data.frame</code> “Players” that was just created and perform the following actions:</p>
<ol type="1">
<li>Rename the column “FirstName” to “prename”.</li>
<li>Access age in two different ways (compare the similarity of data.frame, matrix, and list indexing).</li>
<li>Perform a logical indexing to select all people with number greater or equal to six.</li>
<li>Add a new observation (row) with arbitrary data (e.g., yourself).</li>
<li>Add a new characteristic (column) to the dataset, e.g.&nbsp;the birthdate or the number of yellow cards.</li>
<li>Select all individuals younger than 30 years who are not goalkeepers.</li>
</ol></section><section id="additional-objects-factor-variables-ordered-categorical-time-series-datetime-variables" class="slide level2"><h2>Additional Objects (Factor Variables, Ordered Categorical, Time Series, Date/Time Variables)</h2>
<p>These special objects are not atomic data types, but they are useful in many applications.</p>
</section><section id="factor-variables" class="slide level2"><h2>Factor Variables</h2>
<p>Information about groups (categorical features) is often required. Examples include:</p>
<ul>
<li>Gender</li>
<li>Car brand</li>
<li>Day of the week</li>
<li>Federal state</li>
</ul>
<p>For this type of information, R provides factor variables, which are created using <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="dv">4</span>)</span>
<span id="cb55-2"><a href=""></a><span class="fu">factor</span>(x, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"female"</span>, <span class="st">"male"</span>))</span>
<span id="cb55-3"><a href=""></a>Z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Yes"</span>,<span class="st">"Yes"</span>,<span class="st">"No"</span>,<span class="st">"Yes"</span>,<span class="st">"Maybe"</span>,<span class="st">"No"</span>,<span class="st">"Maybe"</span>,<span class="st">"Yes"</span>,<span class="st">"Yes"</span>,<span class="st">"No"</span>)</span>
<span id="cb55-4"><a href=""></a><span class="fu">factor</span>(Z)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="why-use-factors" class="slide level2"><h2>Why Use Factors?</h2>
<ul>
<li>Less memory usage</li>
<li>Usable in plots and regressions (e.g., coplots later)</li>
<li>
<code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>, <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code> provide useful functionality:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">size=</span><span class="dv">100</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb56-2"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">factor</span>(x, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"male"</span>, <span class="st">"female"</span>))</span>
<span id="cb56-3"><a href=""></a><span class="fu">plot</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href=""></a><span class="fu">summary</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  male female 
    57     43 </code></pre>
</div>
</div>
<img data-src="PIR_quardo_files/figure-revealjs/list45-1.png" width="480" class="r-stretch"></section><section id="ordered-categories" class="slide level2"><h2>Ordered Categories</h2>
<p>Categorical data can sometimes have a meaningful order.</p>
<p><strong>Example:</strong></p>
<p>Surveys often include questions like:</p>
<p><em>“AI is very helpful, but only if we understand what we want and express it clearly!”</em></p>
<p>with response options:</p>
<ul>
<li><code>strongly agree</code></li>
<li><code>partially agree</code></li>
<li><code>neutral</code></li>
<li><code>somewhat disagree</code></li>
<li><code>strongly disagree</code></li>
</ul>
<p>In such cases, ordering is useful - also for statistical analysis.</p>
</section><section id="ordered-categories-1" class="slide level2"><h2>Ordered Categories</h2>
<p>Ordered factor variables are created using the <code><a href="https://rdrr.io/r/base/factor.html">ordered()</a></code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href=""></a>ord <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"very good"</span>,<span class="st">"medium"</span>,<span class="st">"good"</span>,<span class="st">"bad"</span>,<span class="st">"good"</span>,<span class="st">"bad"</span>,<span class="st">"medium"</span>,<span class="st">"very good"</span>,<span class="st">"good"</span>)</span>
<span id="cb59-2"><a href=""></a><span class="fu">class</span>(ord)     <span class="co"># character</span></span>
<span id="cb59-3"><a href=""></a></span>
<span id="cb59-4"><a href=""></a>OF <span class="ot">&lt;-</span> <span class="fu">ordered</span>(ord, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"very bad"</span>,<span class="st">"bad"</span>,<span class="st">"medium"</span>,<span class="st">"good"</span>,<span class="st">"very good"</span>))</span>
<span id="cb59-5"><a href=""></a><span class="fu">class</span>(OF)      <span class="co"># ordered, factor</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="task-2.9" class="slide level2"><h2>Task 2.9</h2>
<p>Create a factor with the levels <code>"Flanders", "Wallonia", "Brussels"</code>. Also, create an ordered factor sorted in alphabetical order.</p>
</section><section id="date-and-time-information" class="slide level2"><h2>Date and Time Information</h2>
<p>Sometimes, timestamps and/or date information are needed. R provides dedicated data structures for this purpose:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href=""></a><span class="fu">Sys.time</span>()            <span class="co"># Current system time, e.g., "2019-11-08 19:03:43 CET"</span></span>
<span id="cb60-2"><a href=""></a><span class="fu">class</span>(<span class="fu">Sys.time</span>())     <span class="co"># "POSIXct" "POSIXt"</span></span>
<span id="cb60-3"><a href=""></a>?POSIXct              <span class="co"># Help on DateTimeClasses</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>POSIXct</code> class is a data structure that stores a timestamp as the number of seconds since January 1, 1970, 00:00:00 UTC:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(<span class="st">"2019-11-24 10:12:05"</span>, <span class="at">tz =</span> <span class="st">"UTC"</span>)  <span class="co"># Specify the 'timezone'</span></span>
<span id="cb61-2"><a href=""></a><span class="fu">as.numeric</span>(x)                                       <span class="co"># -&gt; 1574590325</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="date-and-time-formats" class="slide level2"><h2>Date and Time Formats</h2>
<p>POSIX timestamps are a widely used convention for representing time in computers.</p>
<p>R provides multiple formatting options for <code>POSIXct</code>/<code>POSIXlt</code> through the <code><a href="https://rdrr.io/r/base/format.html">format()</a></code> function (see also the <code><a href="https://rdrr.io/r/base/strptime.html">strptime()</a></code> function and the article on <a href="https://www.r-bloggers.com/date-formats-in-r/">R-Bloggers</a>).</p>
<p>Some format specifiers:</p>
<ul>
<li>
<code>%m</code>: Month as a decimal number (01-12)</li>
<li>
<code>%y</code>: Year without century (00 - 99)</li>
<li>
<code>%Y</code>: Year with century, e.g., 1987</li>
<li>
<code>%H</code>: Hour as a decimal number</li>
</ul>
<p>Example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(<span class="st">"2019-11-24 10:12:05"</span>, <span class="at">tz =</span> <span class="st">"UTC"</span>)</span>
<span id="cb62-2"><a href=""></a><span class="fu">format</span>(x, <span class="at">format =</span> <span class="st">"%Y-%m: %H Uhr"</span>)     <span class="co"># "2019-11: 10 Uhr"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="date-information" class="slide level2"><h2>Date Information</h2>
<p>Often, only the date (without the time) is needed. For this, R provides the <code>Date</code> class.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2019-11-24"</span>)  <span class="co"># Standard format: %Y-%m-%d</span></span>
<span id="cb63-2"><a href=""></a><span class="fu">class</span>(x)                     <span class="co"># "Date"</span></span>
<span id="cb63-3"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"24.11.2019"</span>, <span class="at">format =</span> <span class="st">"%d.%m.%Y"</span>) <span class="co"># Different format must be specified</span></span>
<span id="cb63-4"><a href=""></a><span class="fu">as.numeric</span>(x)                <span class="co"># 18224 (Number of days since 1/1/1970)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>With the <code>Date</code> and <code>POSIXct</code> classes, calculations can be performed:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href=""></a>(x <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2019-11-24"</span>) <span class="sc">-</span> <span class="fu">as.Date</span>(<span class="st">"2019-11-14"</span>)) <span class="co"># -&gt; Time difference of 10 days</span></span>
<span id="cb64-2"><a href=""></a><span class="fu">class</span>(x)                                             <span class="co"># "difftime"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="task-2.10" class="slide level2"><h2>Task 2.10</h2>
<p>On November 3, 2020, the U.S. presidential election took place.</p>
<ol type="1">
<li><p>Read this date into R.</p></li>
<li>
<p>Format it in R as:</p>
<ul>
<li>“20201103”</li>
<li>“2020-Nov”</li>
<li>“Calendar week: 45”</li>
</ul>
</li>
</ol></section><section id="task-2.11" class="slide level2"><h2>Task 2.11*</h2>
<p>On what day last year did the transition from daylight saving time to standard time occur?<br><strong>Hint</strong>: It is sufficient to show that this day had 25 hours.</p>
</section><section id="time-series-data" class="slide level2"><h2>Time Series Data</h2>
<p>There are several possible classes for time series in R, e.g., <code>ts</code> (from the <code>stats</code> package) and <code>zoo</code> (provided by the <code>zoo</code> package):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href=""></a>uemp <span class="ot">&lt;-</span> <span class="fu">ts</span>( <span class="at">data =</span>  <span class="fu">c</span>( <span class="dv">4284691</span>,<span class="dv">4247561</span>,<span class="dv">4124836</span>,<span class="dv">3976555</span>,</span>
<span id="cb65-2"><a href=""></a>                      <span class="dv">3812335</span>,<span class="dv">3687597</span>,<span class="dv">3715509</span>,<span class="dv">3705949</span>,</span>
<span id="cb65-3"><a href=""></a>                      <span class="dv">3543866</span>,<span class="dv">3434067</span>,<span class="dv">3378747</span>,<span class="dv">3406389</span>,</span>
<span id="cb65-4"><a href=""></a>                      <span class="dv">3659316</span>,<span class="dv">3617418</span>,<span class="dv">3507383</span>,<span class="dv">3413881</span>),</span>
<span id="cb65-5"><a href=""></a>           <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">2007</span>,<span class="dv">1</span>),</span>
<span id="cb65-6"><a href=""></a>           <span class="at">frequency =</span> <span class="dv">12</span>)   <span class="co"># Starts in January 2007, monthly time series</span></span>
<span id="cb65-7"><a href=""></a><span class="fu">class</span>(uemp)                   <span class="co"># "ts"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>ts</code> objects can only represent regular time series. This can sometimes be inconvenient (e.g., trading days in the stock market). For irregular time series, <code>zoo</code> can be used:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href=""></a>a      <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb66-2"><a href=""></a>a.Date <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="fu">as.Date</span>(<span class="st">"2010-01-01"</span>), <span class="at">to =</span> <span class="fu">as.Date</span>(<span class="st">"2020-01-01"</span>), <span class="at">by =</span> <span class="st">"years"</span>)[<span class="sc">-</span><span class="dv">3</span>]</span>
<span id="cb66-3"><a href=""></a>a.zoo  <span class="ot">&lt;-</span> <span class="fu">zoo</span>(<span class="at">x =</span> a, <span class="at">order.by =</span> a.Date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="task-2.12" class="slide level2"><h2>Task 2.12</h2>
<p>Generate a variable <code>Birthdate</code> of class date that holds your date of birth. Then, calculate how many days have passed since you have been born.</p>
</section><section id="reading-data" class="slide level2"><h2>Reading Data</h2>
<p>There are various ways to read data into R, depending on the format in which the data is stored:</p>
<ul>
<li>If data is available as an R image (<code>.RData</code>), objects within it can be easily loaded into the workspace using <code><a href="https://rdrr.io/r/base/load.html">load()</a></code>.</li>
<li>Structured text files are often used for datasets. For example, the dataset <code>Players</code> in CSV format (with <code>,</code> as a separator) looks like this:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb67-1"><a href=""></a><span class="st">""</span><span class="op">,</span><span class="st">"FirstName"</span><span class="op">,</span><span class="st">"LastName"</span><span class="op">,</span><span class="st">"Position"</span><span class="op">,</span><span class="st">"Age"</span><span class="op">,</span><span class="st">"Number"</span></span>
<span id="cb67-2"><a href=""></a><span class="st">"1"</span><span class="op">,</span><span class="st">"Joren"</span><span class="op">,</span><span class="st">"Op de Beeck"</span><span class="op">,</span><span class="st">"Goalkeeper"</span><span class="op">,</span><span class="dv">19</span><span class="op">,</span><span class="dv">23</span></span>
<span id="cb67-3"><a href=""></a><span class="st">"2"</span><span class="op">,</span><span class="st">"Ozgur"</span><span class="op">,</span><span class="st">"Aktas"</span><span class="op">,</span><span class="st">"Defender"</span><span class="op">,</span><span class="dv">28</span><span class="op">,</span><span class="dv">3</span></span>
<span id="cb67-4"><a href=""></a><span class="st">"3"</span><span class="op">,</span><span class="st">"Bryan"</span><span class="op">,</span><span class="st">"Smeets"</span><span class="op">,</span><span class="st">"Midfielder"</span><span class="op">,</span><span class="dv">32</span><span class="op">,</span><span class="dv">5</span></span>
<span id="cb67-5"><a href=""></a><span class="st">"4"</span><span class="op">,</span><span class="st">"Camil"</span><span class="op">,</span><span class="st">"Mmaee"</span><span class="op">,</span><span class="st">"Forward"</span><span class="op">,</span><span class="dv">20</span><span class="op">,</span><span class="dv">7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Functions to read structured text files include <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code>, <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code>, <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv2()</a></code>, <code><a href="https://rdrr.io/r/utils/read.table.html">read.delim()</a></code>, and <code><a href="https://rdrr.io/r/utils/read.table.html">read.delim2()</a></code>, each with different default settings.</p>
</section><section id="reading-data-1" class="slide level2"><h2>Reading Data</h2>
<ul>
<li>
<code>xls</code>/<code>xlsx</code> files: R previously had difficulties handling Excel files, but now the <code>readxl</code> package provides functions <code>read_xls()</code> and <code>read_xlsx()</code>.</li>
<li>Data from other statistical software (Stata, SPSS, Eviews, SAS, etc.) can be read using the <code>foreign</code> and <code>haven</code> packages.</li>
</ul>
<p>Examples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href=""></a>data_pers <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"players.csv"</span>,</span>
<span id="cb68-2"><a href=""></a>                        <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="do">## Variable names in the first row</span></span>
<span id="cb68-3"><a href=""></a>                        <span class="at">sep =</span> <span class="st">";"</span>      <span class="do">## Column separator " ; "</span></span>
<span id="cb68-4"><a href=""></a>                        )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="reading-data-2" class="slide level2"><h2>Reading Data</h2>
<p>More examples (first, download a zip folder with sample files):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href=""></a><span class="do">## Download sample files</span></span>
<span id="cb69-2"><a href=""></a><span class="fu">download.file</span>(<span class="at">url =</span> <span class="st">"https://raw.githubusercontent.com/tobiashartl/Rprogramming_UM/main/data/example.zip"</span>,</span>
<span id="cb69-3"><a href=""></a>                                   , <span class="at">destfile =</span> <span class="st">"example_data.zip"</span>)</span>
<span id="cb69-4"><a href=""></a><span class="do">## Unzip the files</span></span>
<span id="cb69-5"><a href=""></a>res <span class="ot">&lt;-</span> <span class="fu">unzip</span>(<span class="st">"example_data.zip"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"readxl"</span>, <span class="st">"haven"</span>) <span class="do">## Install packages if not available</span></span>
<span id="cb70-2"><a href=""></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb70-3"><a href=""></a></span>
<span id="cb70-4"><a href=""></a>excel_data <span class="ot">&lt;-</span> openxlsx<span class="sc">::</span><span class="fu">read.xlsx</span>(<span class="st">"climate.xlsx"</span>)</span>
<span id="cb70-5"><a href=""></a></span>
<span id="cb70-6"><a href=""></a>csv_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"climate.csv"</span>) <span class="do">## Default values for sep, dec, and header already match!</span></span>
<span id="cb70-7"><a href=""></a>stata_data <span class="ot">&lt;-</span> haven<span class="sc">::</span><span class="fu">read_dta</span>(<span class="st">"climate.dta"</span>) <span class="do">## Specify namespace using "::"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="task-2.13" class="slide level2"><h2>Task 2.13</h2>
<p>Read the climate data ‘climate.csv’ into R. Download the corresponding <a href="https://raw.githubusercontent.com/tobiashartl/Rprogramming_UM/main/data/climate.csv">data set</a>.</p>
<p>Use the <code>read.table</code> function and import the dataset as <code>data_cli</code>. After reading in the data, perform the following steps:</p>
<ul>
<li>Print a summary (check if all variables are correct).</li>
<li>If the column headers were not read correctly, assign the appropriate names.</li>
</ul></section><section id="more-inputoutput" class="slide level2"><h2>More Input/Output</h2>
<ul>
<li><p>Most data can be saved to disk just as they are read in using <code><a href="https://rdrr.io/r/utils/write.table.html">write.csv()</a></code>, <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code>, <code><a href="https://haven.tidyverse.org/reference/read_dta.html">haven::write_dta()</a></code>, etc.</p></li>
<li><p>More fundamental methods to read/write data: <code><a href="https://rdrr.io/r/base/readLines.html">readLines()</a></code>/<code><a href="https://rdrr.io/r/base/writeLines.html">writeLines()</a></code>, <code><a href="https://rdrr.io/r/base/scan.html">scan()</a></code>/<code><a href="https://rdrr.io/r/base/write.html">write()</a></code>.</p></li>
<li><p>Database connections via the <code>odbc</code> package.</p></li>
<li>
<p>Reading from the clipboard after copying data from the <em>players</em> dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href=""></a>players <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="fu">file</span>(<span class="at">description =</span> <span class="st">"clipboard"</span>), <span class="at">sep =</span> <span class="st">";"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</li>
<li><p>Network resources via <code><a href="https://rdrr.io/r/base/connections.html">url()</a></code>, compressed files with <code><a href="https://rdrr.io/r/base/connections.html">unz()</a></code>, etc.</p></li>
</ul>
<p>See also <code>?connections()</code>.</p>
</section></section><section><section id="graphics" class="title-slide slide level1 center"><h1>3. Graphics</h1>

</section><section id="r-base-graphics" class="slide level2"><h2>R Base Graphics</h2>
<ul>
<li>This chapter covers graphical functions from the <code>graphics</code> package.</li>
<li>Other graphics packages include <code>ggplot2</code> (see <a href="https://ggplot2-book.org/">book</a> by Hadley Wickham), <code>plotly</code>, <code>Rgnuplot</code>,…</li>
</ul>
<p>To create plots with R’s standard <code>graphics</code> package, there are <em>high-level</em> and <em>low-level</em> plotting functions.</p>
<ul>
<li>
<em>High-level</em> functions generate a new graphic (and open a <em>device</em>).</li>
<li>
<em>Low-level</em> functions add elements to an existing graphic.</li>
</ul></section><section class="slide level2"><p>Available <em>devices</em> include:</p>
<ul>
<li>
<code>windows()</code>/<code><a href="https://rdrr.io/r/grDevices/x11.html">x11()</a></code>/<code><a href="https://rdrr.io/r/grDevices/quartz.html">quartz()</a></code>: Screen graphics (Windows, Unix, Mac), (default).</li>
<li>
<code><a href="https://rdrr.io/r/grDevices/pdf.html">pdf()</a></code>: Adobe PDF (easily integrated into LaTeX).</li>
<li>
<code><a href="https://rdrr.io/r/grDevices/cairo.html">svg()</a></code>: Scalable Vector Graphics (commonly used on websites).</li>
<li>
<code><a href="https://rdrr.io/r/grDevices/png.html">png()</a></code>, <code><a href="https://rdrr.io/r/grDevices/png.html">jpeg()</a></code>, <code><a href="https://rdrr.io/r/grDevices/png.html">tiff()</a></code>, <code><a href="https://rdrr.io/r/grDevices/png.html">bmp()</a></code>: Various bitmap formats.</li>
</ul></section><section class="slide level2"><p>Creating a graphic:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href=""></a><span class="fu">pdf</span>(<span class="st">"myPlot.pdf"</span>)                   <span class="do">## Open plot device</span></span>
<span id="cb72-2"><a href=""></a><span class="fu">plot</span>(<span class="at">y =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>), <span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>)     <span class="do">## Create graphic with high-level function plot()</span></span>
<span id="cb72-3"><a href=""></a><span class="fu">dev.off</span>()                           <span class="do">## Close plot device</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code> is a function that calls different methods for different objects:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href=""></a><span class="cf">function</span> (x, y, ...)</span>
<span id="cb73-2"><a href=""></a><span class="fu">UseMethod</span>(<span class="st">"plot"</span>)</span>
<span id="cb73-3"><a href=""></a><span class="sc">&lt;</span>bytecode<span class="sc">:</span> <span class="dv">0x55ef0a3b5ec8</span><span class="sc">&gt;</span></span>
<span id="cb73-4"><a href=""></a><span class="er">&lt;</span>environment<span class="sc">:</span> namespace<span class="sc">:</span>graphics<span class="sc">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>These methods correspond to the available high-level plot functions.</p>
</section><section id="types-of-plots-high-level-plots" class="slide level2"><h2>Types of Plots (High-Level Plots)</h2>
<ul>
<li>
<code><a href="https://rdrr.io/r/graphics/barplot.html">barplot()</a></code>: Bar chart</li>
<li>
<code><a href="https://rdrr.io/r/graphics/pie.html">pie()</a></code>: Pie chart (<code>plotrix</code> package includes <code>pie3d</code>)</li>
<li>
<code><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot()</a></code>: Box plot</li>
<li>
<code><a href="https://rdrr.io/r/graphics/contour.html">contour()</a></code>: Ideal for contour maps, i.e., f: R² -&gt; R; <code><a href="https://rdrr.io/r/graphics/filled.contour.html">filled.contour()</a></code> for colored contour maps</li>
<li>
<code><a href="https://rdrr.io/r/graphics/coplot.html">coplot()</a></code>: Conditioning plot</li>
<li>
<code><a href="https://rdrr.io/r/graphics/curve.html">curve()</a></code>: Line plot, allows function input via <code>curve(f(x))</code>
</li>
<li>
<code><a href="https://rdrr.io/r/graphics/dotchart.html">dotchart()</a></code>: Useful for many factors with one level</li>
<li>
<code><a href="https://rdrr.io/r/graphics/hist.html">hist()</a></code>: Histogram</li>
<li>
<code><a href="https://rdrr.io/r/graphics/mosaicplot.html">mosaicplot()</a></code>: Mosaic plot; useful for compositions over time</li>
</ul></section><section class="slide level2"><ul>
<li>
<code><a href="https://rdrr.io/r/graphics/pairs.html">pairs()</a></code>: Useful for correlation analysis</li>
<li>
<code><a href="https://rdrr.io/r/graphics/image.html">image()</a></code>: For drawing images</li>
<li>
<code><a href="https://rdrr.io/r/graphics/persp.html">persp()</a></code>: 3D graph drawing, including coordinate axis selection</li>
<li>
<code>scatterplot3d()</code>: Same as above</li>
<li>
<code><a href="https://rdrr.io/r/stats/qqnorm.html">qqplot()</a></code>: Quantile-Quantile plot</li>
</ul></section><section class="slide level2"><p>Examples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href=""></a><span class="fu">download.file</span>(<span class="at">url =</span> <span class="st">"https://raw.githubusercontent.com/tobiashartl/Rprogramming_UM/main/data/CPS1985.RData"</span>,</span>
<span id="cb74-2"><a href=""></a>                                   , <span class="at">destfile =</span> <span class="st">"CPS1985.RData"</span>)</span>
<span id="cb74-3"><a href=""></a><span class="fu">load</span>(<span class="st">"CPS1985.RData"</span>)</span>
<span id="cb74-4"><a href=""></a><span class="fu">class</span>(CPS1985)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href=""></a><span class="fu">plot</span>(CPS1985)             <span class="do">## plot on data.frame calls pairs()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="PIR_quardo_files/figure-revealjs/list62-1.png" width="864" class="r-stretch"></section><section class="slide level2"><p>Examples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href=""></a><span class="fu">class</span>(CPS1985<span class="sc">$</span>wage)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href=""></a><span class="fu">plot</span>(CPS1985<span class="sc">$</span>wage)       <span class="do">## plot on numeric calls plot.default()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="PIR_quardo_files/figure-revealjs/list63-1.png" width="864" class="r-stretch"></section><section class="slide level2"><p>Examples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href=""></a><span class="fu">class</span>(CPS1985<span class="sc">$</span>occupation)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "factor"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href=""></a><span class="fu">plot</span>(CPS1985<span class="sc">$</span>occupation)       <span class="do">## plot on factor calls barplot()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="PIR_quardo_files/figure-revealjs/list64-1.png" width="864" class="r-stretch"></section><section id="a-continuous-variable" class="slide level2"><h2>A Continuous Variable</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href=""></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb83-2"><a href=""></a><span class="fu">hist</span>(CPS1985<span class="sc">$</span>wage, <span class="at">breaks =</span> <span class="dv">20</span>)</span>
<span id="cb83-3"><a href=""></a><span class="fu">plot</span>(<span class="fu">density</span>(CPS1985<span class="sc">$</span>wage))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="PIR_quardo_files/figure-revealjs/list65-1.png" width="864" class="r-stretch"></section><section id="a-discrete-variable" class="slide level2"><h2>A Discrete Variable</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href=""></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb84-2"><a href=""></a><span class="fu">plot</span>(CPS1985<span class="sc">$</span>occupation)        <span class="do">## Generates barplot(table(CPS1985$occupation))</span></span>
<span id="cb84-3"><a href=""></a><span class="fu">pie</span>(<span class="fu">table</span>(CPS1985<span class="sc">$</span>occupation))  <span class="do">## Same information, but not necessarily recommended</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="PIR_quardo_files/figure-revealjs/list66-1.png" width="864" class="r-stretch"></section><section id="two-continuous-variables" class="slide level2"><h2>Two Continuous Variables</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href=""></a><span class="do">## Scatterplot as a starting point for most analyses:</span></span>
<span id="cb85-2"><a href=""></a><span class="fu">plot</span>(<span class="at">x =</span> CPS1985<span class="sc">$</span>education, <span class="at">y =</span> CPS1985<span class="sc">$</span>wage)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="PIR_quardo_files/figure-revealjs/list67-1.png" width="864" class="r-stretch"></section><section id="two-discrete-variables" class="slide level2"><h2>Two Discrete Variables</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href=""></a><span class="do">## Mosaic plot as a starting point for most analyses:</span></span>
<span id="cb86-2"><a href=""></a><span class="fu">plot</span>(gender <span class="sc">~</span> occupation, <span class="at">data =</span> CPS1985)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="PIR_quardo_files/figure-revealjs/list68-1.png" width="864" class="r-stretch"></section><section id="continuous-variable-dependent-on-a-discrete-variable" class="slide level2"><h2>Continuous Variable Dependent on a Discrete Variable</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href=""></a><span class="fu">plot</span>(wage <span class="sc">~</span> occupation, <span class="at">data =</span> CPS1985)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="PIR_quardo_files/figure-revealjs/list69-1.png" width="864" class="r-stretch"></section><section id="three-or-more-variables" class="slide level2"><h2>Three or More Variables</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href=""></a><span class="do">## Sequentially</span></span>
<span id="cb88-2"><a href=""></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb88-3"><a href=""></a><span class="fu">plot</span>(wage <span class="sc">~</span> education <span class="sc">+</span> occupation, <span class="at">data =</span> CPS1985)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="PIR_quardo_files/figure-revealjs/list70-1.png" width="864" class="r-stretch"></section><section class="slide level2"><div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href=""></a><span class="do">## In one plot</span></span>
<span id="cb89-2"><a href=""></a><span class="fu">coplot</span>(wage <span class="sc">~</span> education <span class="sc">|</span> occupation, <span class="at">data =</span> CPS1985)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="PIR_quardo_files/figure-revealjs/list71-1.png" width="864" class="r-stretch"></section><section class="slide level2"><div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href=""></a><span class="do">## Four variables in one plot</span></span>
<span id="cb90-2"><a href=""></a><span class="fu">coplot</span>(wage <span class="sc">~</span> education <span class="sc">|</span> occupation <span class="sc">+</span> gender, <span class="at">data =</span> CPS1985)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="PIR_quardo_files/figure-revealjs/list72-1.png" width="864" class="r-stretch"></section><section id="customizing-graphics" class="slide level2"><h2>Customizing Graphics</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href=""></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb91-2"><a href=""></a><span class="fu">hist</span>(CPS1985<span class="sc">$</span>education, <span class="at">breaks =</span> <span class="dv">3</span>)  <span class="do">## Coarsely detailed histogram</span></span>
<span id="cb91-3"><a href=""></a><span class="fu">hist</span>(CPS1985<span class="sc">$</span>education, <span class="at">breaks =</span> <span class="dv">16</span>) <span class="do">## More detailed histogram</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="PIR_quardo_files/figure-revealjs/list73-1.png" width="864" class="r-stretch"></section><section class="slide level2"><div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href=""></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb92-2"><a href=""></a><span class="fu">plot</span>(CPS1985<span class="sc">$</span>wage, <span class="at">type =</span> <span class="st">"p"</span>) <span class="do">## Points</span></span>
<span id="cb92-3"><a href=""></a><span class="fu">plot</span>(CPS1985<span class="sc">$</span>wage, <span class="at">type =</span> <span class="st">"l"</span>) <span class="do">## Lines</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="PIR_quardo_files/figure-revealjs/list74-1.png" width="960" class="r-stretch"></section><section class="slide level2"><div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href=""></a><span class="co"># Title and axis labels</span></span>
<span id="cb93-2"><a href=""></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb93-3"><a href=""></a><span class="fu">with</span>(CPS1985, {</span>
<span id="cb93-4"><a href=""></a>  <span class="fu">plot</span>(<span class="at">x =</span> age, <span class="at">y =</span> wage,</span>
<span id="cb93-5"><a href=""></a>     <span class="at">main =</span> <span class="st">"Scatterplot of Age and Hourly Wage"</span>)</span>
<span id="cb93-6"><a href=""></a>  <span class="fu">plot</span>(age, wage,</span>
<span id="cb93-7"><a href=""></a>     <span class="at">xlab =</span> <span class="st">"Age in Years"</span>, <span class="at">ylab =</span> <span class="st">"Hourly Wage"</span>,</span>
<span id="cb93-8"><a href=""></a>     <span class="at">main =</span> <span class="st">"Scatterplot of Age and Hourly Wage"</span>)</span>
<span id="cb93-9"><a href=""></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="PIR_quardo_files/figure-revealjs/list75-1.png" width="960" class="r-stretch"></section><section id="fine-tuning" class="slide level2"><h2>Fine-Tuning</h2>
Not everything can be adjusted via optional arguments in high-level functions; in such cases, <code><a href="https://rdrr.io/r/graphics/par.html">par()</a></code> is often used:
<div style="display: flex; gap: 2em;">
<div style="flex: 1;">
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href=""></a><span class="fu">par</span>(<span class="at">bg =</span> <span class="st">"yellow"</span>)</span>
<span id="cb94-2"><a href=""></a><span class="fu">with</span>(CPS1985,</span>
<span id="cb94-3"><a href=""></a>     <span class="fu">plot</span>(age)</span>
<span id="cb94-4"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img data-src="PIR_quardo_files/figure-revealjs/list76-1.png" width="480"></p>
</figure>
</div>
</div>
</div>
</div>
<div style="flex: 1;">
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href=""></a><span class="fu">par</span>(<span class="at">bg =</span> <span class="st">"transparent"</span>, <span class="at">cex=</span><span class="fl">0.5</span>)</span>
<span id="cb95-2"><a href=""></a><span class="fu">with</span>(CPS1985,</span>
<span id="cb95-3"><a href=""></a>     <span class="fu">plot</span>(age)</span>
<span id="cb95-4"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img data-src="PIR_quardo_files/figure-revealjs/list77-1.png" width="480"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section><section class="slide level2"><p><strong>Overview</strong>: Frequently used arguments in graphic functions. See <code><a href="https://rdrr.io/r/graphics/par.html">?par</a></code> for all graphical options</p>
<ul>
<li>
<code>axes</code>: Axis specification</li>
<li>
<code>bg</code>: Background color</li>
<li>
<code>cex</code>: Factor for scaling relative to the default</li>
<li>
<code>col</code>: Plot color</li>
<li>
<code>log</code>: <code>xlog</code> and <code>ylog</code> for logarithmic scales</li>
<li>
<code>lty</code>, <code>lwd</code>: Line type and thickness</li>
<li>
<code>mai</code>: 4-vector specifying margins (bottom, left, top, right)</li>
<li>
<code>main</code>, <code>sub</code>: Title, subtitle</li>
<li>
<code>mar</code>: Margin</li>
</ul></section><section class="slide level2"><ul>
<li>
<code>mfcol</code>, <code>mfrow</code>: Multiple plots in one graphics window (column-wise/row-wise)</li>
<li>
<code>pch</code>: Point character (1-16)</li>
<li>
<code>usr</code>: The extreme points for a plot</li>
<li>
<code>xlab</code>, <code>ylab</code>: x and y axis labels</li>
<li>
<code>xlim</code>, <code>ylim</code>: x and y axis limits</li>
</ul></section><section id="low-level-graphic-functions" class="slide level2"><h2>Low-Level Graphic Functions</h2>
<ul>
<li>
<code>lines</code>: Draw lines</li>
<li>
<code>abline</code>: Quickly add horizontal, vertical lines, and lines using equation <span class="math inline">\(y = bx + a\)</span>
</li>
<li>
<code>points</code>: Add points</li>
<li>
<code>arrows</code>: Add arrows</li>
<li>
<code>polygon</code>: Draw arbitrary polygons</li>
<li>
<code>segments</code>: Draw unfilled polygons</li>
<li>
<code>axis</code>: Customize axes</li>
<li>
<code>grid</code>: Add a grid</li>
</ul></section><section class="slide level2"><ul>
<li>
<code>rug</code>: “Density carpet”</li>
<li>
<code>title</code>: Add a title</li>
<li>
<code>legend</code>: Add a legend</li>
<li>
<code>text</code>: Add text at <span class="math inline">\((x,y)\)</span> coordinates</li>
<li>
<code>mtext</code>: Add text with positional specification like <code>side=1,...,4</code>
</li>
</ul></section><section class="slide level2"><div style="display: flex; gap: 2em;">
<div style="flex: 1;">
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href=""></a><span class="fu">attach</span>(CPS1985) <span class="do">## see ?attach</span></span>
<span id="cb96-2"><a href=""></a><span class="fu">plot</span>(<span class="at">x =</span> education, <span class="at">y =</span> wage, <span class="co">#&lt;&lt;</span></span>
<span id="cb96-3"><a href=""></a>     <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">axes =</span> <span class="cn">FALSE</span>)  <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div style="flex: 1;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure><p><img data-src="PIR_quardo_files/figure-revealjs/list78a-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section><section class="slide level2"><div style="display: flex; gap: 2em;">
<div style="flex: 1;">
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href=""></a><span class="fu">attach</span>(CPS1985)</span>
<span id="cb97-2"><a href=""></a><span class="fu">plot</span>(<span class="at">x =</span> education, <span class="at">y =</span> wage,</span>
<span id="cb97-3"><a href=""></a>     <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">axes =</span> <span class="cn">FALSE</span>)</span>
<span id="cb97-4"><a href=""></a></span>
<span id="cb97-5"><a href=""></a><span class="co"># Add axes</span></span>
<span id="cb97-6"><a href=""></a>ticks <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">100</span>, <span class="dv">100</span>, <span class="fl">0.5</span>) <span class="co">#&lt;&lt;</span></span>
<span id="cb97-7"><a href=""></a><span class="fu">axis</span>(<span class="at">side =</span> <span class="dv">1</span>, <span class="at">at =</span> ticks,   <span class="co">#&lt;&lt;</span></span>
<span id="cb97-8"><a href=""></a>     <span class="at">labels =</span> <span class="fu">paste</span>(ticks,<span class="st">"y"</span>))</span>
<span id="cb97-9"><a href=""></a></span>
<span id="cb97-10"><a href=""></a><span class="fu">axis</span>(<span class="at">side =</span> <span class="dv">2</span>, <span class="at">at =</span> </span>
<span id="cb97-11"><a href=""></a>        <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">100</span>,<span class="dv">100</span>, <span class="fl">0.5</span>))<span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div style="flex: 1;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure><p><img data-src="PIR_quardo_files/figure-revealjs/list79a-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section><section class="slide level2"><div style="display: flex; gap: 2em;">
<div style="flex: 1;">
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href=""></a><span class="fu">attach</span>(CPS1985)</span>
<span id="cb98-2"><a href=""></a><span class="fu">plot</span>(<span class="at">x =</span> education, <span class="at">y =</span> wage,</span>
<span id="cb98-3"><a href=""></a>     <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">axes =</span> <span class="cn">FALSE</span>)</span>
<span id="cb98-4"><a href=""></a></span>
<span id="cb98-5"><a href=""></a><span class="co"># Add axes</span></span>
<span id="cb98-6"><a href=""></a>ticks <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">100</span>, <span class="dv">100</span>, <span class="fl">0.5</span>)</span>
<span id="cb98-7"><a href=""></a><span class="fu">axis</span>(<span class="at">side =</span> <span class="dv">1</span>, <span class="at">at =</span> ticks,</span>
<span id="cb98-8"><a href=""></a>     <span class="at">labels =</span> <span class="fu">paste</span>(ticks,<span class="st">"y"</span>))</span>
<span id="cb98-9"><a href=""></a></span>
<span id="cb98-10"><a href=""></a><span class="fu">axis</span>(<span class="at">side =</span> <span class="dv">2</span>, <span class="at">at =</span> </span>
<span id="cb98-11"><a href=""></a>        <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">100</span>,<span class="dv">100</span>, <span class="fl">0.5</span>))</span>
<span id="cb98-12"><a href=""></a></span>
<span id="cb98-13"><a href=""></a><span class="co"># Add tick marks</span></span>
<span id="cb98-14"><a href=""></a><span class="fu">rug</span>(wage, <span class="at">side =</span> <span class="dv">2</span>) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div style="flex: 1;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure><p><img data-src="PIR_quardo_files/figure-revealjs/list80a-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section><section class="slide level2"><div style="display: flex; gap: 2em;">
<div style="flex: 1;">
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href=""></a><span class="fu">attach</span>(CPS1985)</span>
<span id="cb99-2"><a href=""></a><span class="fu">plot</span>(<span class="at">x =</span> education, <span class="at">y =</span> wage,</span>
<span id="cb99-3"><a href=""></a>     <span class="at">pch =</span> <span class="dv">30</span>, <span class="at">axes =</span> <span class="cn">FALSE</span>)</span>
<span id="cb99-4"><a href=""></a></span>
<span id="cb99-5"><a href=""></a><span class="co"># Add axes</span></span>
<span id="cb99-6"><a href=""></a>ticks <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">100</span>, <span class="dv">100</span>, <span class="fl">0.5</span>)</span>
<span id="cb99-7"><a href=""></a><span class="fu">axis</span>(<span class="at">side =</span> <span class="dv">1</span>, <span class="at">at =</span> ticks,</span>
<span id="cb99-8"><a href=""></a>     <span class="at">labels =</span> <span class="fu">paste</span>(ticks,<span class="st">"y"</span>))</span>
<span id="cb99-9"><a href=""></a></span>
<span id="cb99-10"><a href=""></a><span class="fu">axis</span>(<span class="at">side =</span> <span class="dv">2</span>, <span class="at">at =</span> </span>
<span id="cb99-11"><a href=""></a>        <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">100</span>,<span class="dv">100</span>, <span class="fl">0.5</span>))</span>
<span id="cb99-12"><a href=""></a></span>
<span id="cb99-13"><a href=""></a><span class="co"># Add tick marks </span></span>
<span id="cb99-14"><a href=""></a><span class="fu">rug</span>(wage, <span class="at">side =</span> <span class="dv">2</span>)</span>
<span id="cb99-15"><a href=""></a></span>
<span id="cb99-16"><a href=""></a><span class="co"># Add regression line </span></span>
<span id="cb99-17"><a href=""></a><span class="fu">abline</span>(<span class="at">a =</span> <span class="sc">-</span><span class="fl">0.7460</span>, <span class="at">b=</span><span class="fl">0.7505</span>, </span>
<span id="cb99-18"><a href=""></a>        <span class="at">col=</span><span class="st">"blue"</span>) <span class="co">#&lt;&lt;</span></span>
<span id="cb99-19"><a href=""></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fu">mean</span>(wage), <span class="at">lty=</span><span class="dv">2</span>, </span>
<span id="cb99-20"><a href=""></a>    <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lwd =</span> <span class="dv">8</span>) <span class="co">#&lt;&lt;</span></span>
<span id="cb99-21"><a href=""></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">mean</span>(education), <span class="at">lty=</span><span class="dv">3</span>, </span>
<span id="cb99-22"><a href=""></a>    <span class="at">col =</span> <span class="st">"orange"</span>, <span class="at">lwd =</span> <span class="dv">4</span>) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div style="flex: 1;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure><p><img data-src="PIR_quardo_files/figure-revealjs/list81a-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section><section class="slide level2"><div style="display: flex; gap: 2em;">
<div style="flex: 1;">
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href=""></a><span class="fu">plot</span>(<span class="at">x =</span> education, <span class="at">y =</span> wage, <span class="co"># &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span></span>
<span id="cb100-2"><a href=""></a>     <span class="at">pch =</span> <span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div style="flex: 1;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure><p><img data-src="PIR_quardo_files/figure-revealjs/list82a-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section><section class="slide level2"><div style="display: flex; gap: 2em;">
<div style="flex: 1;">
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href=""></a><span class="fu">plot</span>(<span class="at">x =</span> education, <span class="at">y =</span> wage, <span class="co"># &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span></span>
<span id="cb101-2"><a href=""></a>     <span class="at">pch =</span> <span class="dv">16</span>)</span>
<span id="cb101-3"><a href=""></a><span class="fu">lines</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">10</span>),        <span class="co">#&lt;&lt;</span></span>
<span id="cb101-4"><a href=""></a>      <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">25</span>),      <span class="co">#&lt;&lt;</span></span>
<span id="cb101-5"><a href=""></a>      <span class="at">col=</span><span class="st">"darkgreen"</span>, <span class="at">lwd =</span> <span class="dv">3</span>) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div style="flex: 1;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure><p><img data-src="PIR_quardo_files/figure-revealjs/list83a-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section><section class="slide level2"><div style="display: flex; gap: 2em;">
<div style="flex: 1;">
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href=""></a><span class="fu">plot</span>(<span class="at">x =</span> education, <span class="at">y =</span> wage, <span class="co"># &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span></span>
<span id="cb102-2"><a href=""></a>     <span class="at">pch =</span> <span class="dv">16</span>)</span>
<span id="cb102-3"><a href=""></a><span class="fu">lines</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">10</span>),</span>
<span id="cb102-4"><a href=""></a>      <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">25</span>),</span>
<span id="cb102-5"><a href=""></a>      <span class="at">col=</span><span class="st">"darkgreen"</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span>
<span id="cb102-6"><a href=""></a><span class="fu">points</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">10</span>),        <span class="co">#&lt;&lt;</span></span>
<span id="cb102-7"><a href=""></a>      <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">25</span>),      <span class="co">#&lt;&lt;</span></span>
<span id="cb102-8"><a href=""></a>      <span class="at">col=</span><span class="st">"darkred"</span>, <span class="at">pch =</span> <span class="dv">19</span>) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div style="flex: 1;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure><p><img data-src="PIR_quardo_files/figure-revealjs/list84a-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section><section class="slide level2"><div style="display: flex; gap: 2em;">
<div style="flex: 1;">
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href=""></a><span class="fu">plot</span>(<span class="at">x =</span> education, <span class="at">y =</span> wage, <span class="co"># &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span></span>
<span id="cb103-2"><a href=""></a>     <span class="at">pch =</span> <span class="dv">16</span>)</span>
<span id="cb103-3"><a href=""></a><span class="fu">lines</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">10</span>),</span>
<span id="cb103-4"><a href=""></a>      <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">25</span>),</span>
<span id="cb103-5"><a href=""></a>      <span class="at">col=</span><span class="st">"darkgreen"</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span>
<span id="cb103-6"><a href=""></a><span class="fu">points</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">10</span>),</span>
<span id="cb103-7"><a href=""></a>      <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">25</span>),</span>
<span id="cb103-8"><a href=""></a>      <span class="at">col=</span><span class="st">"darkred"</span>, <span class="at">pch =</span> <span class="dv">19</span>)</span>
<span id="cb103-9"><a href=""></a><span class="fu">polygon</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">10</span>, <span class="dv">8</span>), <span class="co">#&lt;&lt;</span></span>
<span id="cb103-10"><a href=""></a>        <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">20</span>,<span class="dv">10</span>), <span class="co">#&lt;&lt;</span></span>
<span id="cb103-11"><a href=""></a>        <span class="at">col=</span><span class="st">"lightgreen"</span>) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div style="flex: 1;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure><p><img data-src="PIR_quardo_files/figure-revealjs/list85a-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section><section class="slide level2"><div style="display: flex; gap: 2em;">
<div style="flex: 1;">
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href=""></a><span class="fu">plot</span>(<span class="at">x =</span> education, <span class="at">y =</span> wage, <span class="co"># &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span></span>
<span id="cb104-2"><a href=""></a>     <span class="at">pch =</span> <span class="dv">16</span>)</span>
<span id="cb104-3"><a href=""></a><span class="fu">lines</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">10</span>),</span>
<span id="cb104-4"><a href=""></a>      <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">25</span>),</span>
<span id="cb104-5"><a href=""></a>      <span class="at">col=</span><span class="st">"darkgreen"</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span>
<span id="cb104-6"><a href=""></a><span class="fu">points</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">10</span>),</span>
<span id="cb104-7"><a href=""></a>      <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">25</span>),</span>
<span id="cb104-8"><a href=""></a>      <span class="at">col=</span><span class="st">"darkred"</span>, <span class="at">pch =</span> <span class="dv">19</span>)</span>
<span id="cb104-9"><a href=""></a><span class="fu">polygon</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">10</span>, <span class="dv">8</span>),</span>
<span id="cb104-10"><a href=""></a>        <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">20</span>,<span class="dv">10</span>),</span>
<span id="cb104-11"><a href=""></a>        <span class="at">col=</span><span class="st">"lightgreen"</span>)</span>
<span id="cb104-12"><a href=""></a><span class="fu">arrows</span>(<span class="at">x0 =</span> <span class="dv">10</span>, <span class="at">y0 =</span> <span class="dv">40</span>, <span class="at">x1 =</span> <span class="fl">13.8</span>, <span class="co">#&lt;&lt;</span></span>
<span id="cb104-13"><a href=""></a>       <span class="at">y1 =</span> <span class="fl">44.2</span>, <span class="at">lwd =</span> <span class="dv">5</span>, <span class="co">#&lt;&lt;</span></span>
<span id="cb104-14"><a href=""></a>       <span class="at">col =</span> <span class="st">"darkblue"</span>)   <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div style="flex: 1;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure><p><img data-src="PIR_quardo_files/figure-revealjs/list86a-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section><section class="slide level2"><div style="display: flex; gap: 2em;">
<div style="flex: 1;">
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href=""></a><span class="fu">plot</span>(<span class="at">x =</span> education, <span class="at">y =</span> wage, <span class="co"># &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span></span>
<span id="cb105-2"><a href=""></a>     <span class="at">pch =</span> <span class="dv">16</span>)</span>
<span id="cb105-3"><a href=""></a><span class="fu">lines</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">10</span>),</span>
<span id="cb105-4"><a href=""></a>      <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">25</span>),</span>
<span id="cb105-5"><a href=""></a>      <span class="at">col=</span><span class="st">"darkgreen"</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span>
<span id="cb105-6"><a href=""></a><span class="fu">points</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">10</span>),</span>
<span id="cb105-7"><a href=""></a>      <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">25</span>),</span>
<span id="cb105-8"><a href=""></a>      <span class="at">col=</span><span class="st">"darkred"</span>, <span class="at">pch =</span> <span class="dv">19</span>)</span>
<span id="cb105-9"><a href=""></a><span class="fu">polygon</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">10</span>, <span class="dv">8</span>),</span>
<span id="cb105-10"><a href=""></a>        <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">20</span>,<span class="dv">10</span>),</span>
<span id="cb105-11"><a href=""></a>        <span class="at">col=</span><span class="st">"lightgreen"</span>)</span>
<span id="cb105-12"><a href=""></a><span class="fu">arrows</span>(<span class="at">x0 =</span> <span class="dv">10</span>, <span class="at">y0 =</span> <span class="dv">40</span>, <span class="at">x1 =</span> <span class="fl">13.8</span>,</span>
<span id="cb105-13"><a href=""></a>       <span class="at">y1 =</span> <span class="fl">44.2</span>, <span class="at">lwd =</span> <span class="dv">5</span>,</span>
<span id="cb105-14"><a href=""></a>       <span class="at">col =</span> <span class="st">"darkblue"</span>)</span>
<span id="cb105-15"><a href=""></a><span class="fu">title</span>(<span class="st">"Wage versus Education"</span>) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div style="flex: 1;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure><p><img data-src="PIR_quardo_files/figure-revealjs/list87a-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section><section class="slide level2"><div style="display: flex; gap: 2em;">
<div style="flex: 1;">
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href=""></a><span class="fu">plot</span>(<span class="at">x =</span> education, <span class="at">y =</span> wage, <span class="co"># &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span></span>
<span id="cb106-2"><a href=""></a>     <span class="at">pch =</span> <span class="dv">16</span>)</span>
<span id="cb106-3"><a href=""></a><span class="fu">lines</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">10</span>),</span>
<span id="cb106-4"><a href=""></a>      <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">25</span>),</span>
<span id="cb106-5"><a href=""></a>      <span class="at">col=</span><span class="st">"darkgreen"</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span>
<span id="cb106-6"><a href=""></a><span class="fu">points</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">10</span>),</span>
<span id="cb106-7"><a href=""></a>      <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">25</span>),</span>
<span id="cb106-8"><a href=""></a>      <span class="at">col=</span><span class="st">"darkred"</span>, <span class="at">pch =</span> <span class="dv">19</span>)</span>
<span id="cb106-9"><a href=""></a><span class="fu">polygon</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">10</span>, <span class="dv">8</span>),</span>
<span id="cb106-10"><a href=""></a>        <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">20</span>,<span class="dv">10</span>),</span>
<span id="cb106-11"><a href=""></a>        <span class="at">col=</span><span class="st">"lightgreen"</span>)</span>
<span id="cb106-12"><a href=""></a><span class="fu">arrows</span>(<span class="at">x0 =</span> <span class="dv">10</span>, <span class="at">y0 =</span> <span class="dv">40</span>, <span class="at">x1 =</span> <span class="fl">13.8</span>,</span>
<span id="cb106-13"><a href=""></a>       <span class="at">y1 =</span> <span class="fl">44.2</span>, <span class="at">lwd =</span> <span class="dv">5</span>,</span>
<span id="cb106-14"><a href=""></a>       <span class="at">col =</span> <span class="st">"darkblue"</span>)</span>
<span id="cb106-15"><a href=""></a><span class="fu">title</span>(<span class="st">"Wage versus Education"</span>) <span class="co">#&lt;&lt;</span></span>
<span id="cb106-16"><a href=""></a><span class="fu">text</span>(<span class="at">x =</span> <span class="dv">11</span>, <span class="at">y =</span> <span class="dv">30</span>, </span>
<span id="cb106-17"><a href=""></a>    <span class="st">"Text in Plot"</span>) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div style="flex: 1;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure><p><img data-src="PIR_quardo_files/figure-revealjs/list88a-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section><section class="slide level2"><div style="display: flex; gap: 2em;">
<div style="flex: 1;">
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href=""></a><span class="fu">plot</span>(<span class="at">x =</span> education, <span class="at">y =</span> wage,<span class="co"># &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span></span>
<span id="cb107-2"><a href=""></a>     <span class="at">pch =</span> <span class="dv">16</span>)</span>
<span id="cb107-3"><a href=""></a><span class="fu">lines</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">10</span>),</span>
<span id="cb107-4"><a href=""></a>      <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">25</span>),</span>
<span id="cb107-5"><a href=""></a>      <span class="at">col=</span><span class="st">"darkgreen"</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span>
<span id="cb107-6"><a href=""></a><span class="fu">points</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">10</span>),</span>
<span id="cb107-7"><a href=""></a>      <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">25</span>),</span>
<span id="cb107-8"><a href=""></a>      <span class="at">col=</span><span class="st">"darkred"</span>, <span class="at">pch =</span> <span class="dv">19</span>)</span>
<span id="cb107-9"><a href=""></a><span class="fu">polygon</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">10</span>, <span class="dv">8</span>),</span>
<span id="cb107-10"><a href=""></a>        <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">20</span>,<span class="dv">10</span>),</span>
<span id="cb107-11"><a href=""></a>        <span class="at">col=</span><span class="st">"lightgreen"</span>)</span>
<span id="cb107-12"><a href=""></a><span class="fu">arrows</span>(<span class="at">x0 =</span> <span class="dv">10</span>, <span class="at">y0 =</span> <span class="dv">40</span>, <span class="at">x1 =</span> <span class="fl">13.8</span>,</span>
<span id="cb107-13"><a href=""></a>       <span class="at">y1 =</span> <span class="fl">44.2</span>, <span class="at">lwd =</span> <span class="dv">5</span>,</span>
<span id="cb107-14"><a href=""></a>       <span class="at">col =</span> <span class="st">"darkblue"</span>)</span>
<span id="cb107-15"><a href=""></a><span class="fu">title</span>(<span class="st">"Wage versus Education"</span>) <span class="co">#&lt;&lt;</span></span>
<span id="cb107-16"><a href=""></a><span class="fu">text</span>(<span class="at">x =</span> <span class="dv">11</span>, <span class="at">y =</span> <span class="dv">30</span>, <span class="st">"Text in Plot"</span>)</span>
<span id="cb107-17"><a href=""></a><span class="fu">legend</span>(<span class="at">x=</span><span class="st">"topright"</span>, <span class="co">#&lt;&lt;</span></span>
<span id="cb107-18"><a href=""></a>  <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"Data point"</span>,<span class="st">"Line"</span>), <span class="co">#&lt;&lt;</span></span>
<span id="cb107-19"><a href=""></a>  <span class="at">lty =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">1</span>), </span>
<span id="cb107-20"><a href=""></a>  <span class="at">pch =</span> <span class="fu">c</span>(<span class="dv">19</span>, <span class="cn">NA</span>),   <span class="co">#&lt;&lt;</span></span>
<span id="cb107-21"><a href=""></a>  <span class="at">lwd =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>), </span>
<span id="cb107-22"><a href=""></a>  <span class="at">col =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">"darkgreen"</span>))  <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div style="flex: 1;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure><p><img data-src="PIR_quardo_files/figure-revealjs/list89a-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section><section id="task-3.1" class="slide level2"><h2>Task 3.1</h2>
<p>Draw a plot of the function ( f(x) = e^x + 2 ) in the range from -2 to +2, with the line color set to green.<br>
Create a legend in the upper left corner with the entry ( e^x + 2 ) and the corresponding line.</p>
<p><strong>Hint</strong>: To include mathematical labels in a legend, you need to use<br>
“mathematical annotations,” which can be found <a href="http://stuff.mit.edu/afs/sipb/project/r-project/arch/i386_rhel3/lib/R/library/graphics/html/plotmath.html">here</a>.<br>
With <code><a href="https://rdrr.io/r/base/paste.html">paste()</a></code> and <code><a href="https://rdrr.io/r/base/expression.html">expression()</a></code>, this should be straightforward.</p>
</section><section id="task-3.2" class="slide level2"><h2>Task 3.2</h2>
<p>Create a scatter plot of daily average temperature in Maastricht against Eelde using the wide-format climate data. Color the points based on whether the average temperature in Maastricht on that day was above or below 10°C:</p>
<p>Use red for days when Maastricht’s temperature was above 10°C, Use blue for days when it was 10°C or below. Add a legend to indicate the meaning of the colors.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href=""></a><span class="fu">download.file</span>(<span class="at">url =</span> <span class="st">"https://raw.githubusercontent.com/tobiashartl/Rprogramming_UM/main/data/temperature.RDS"</span>,</span>
<span id="cb108-2"><a href=""></a>                                   , <span class="at">destfile =</span> <span class="st">"temperature.RDS"</span>)</span>
<span id="cb108-3"><a href=""></a>temperature <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"temperature.RDS"</span>)          </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="task-3.3" class="slide level2"><h2>Task 3.3</h2>
<p>Try to draw a white, five-pointed star on a red background (e.g., using <code><a href="https://rdrr.io/r/graphics/polygon.html">polygon()</a></code>).<br>
Save this as a <code>.pdf</code> file in the “graphs” folder.</p>
</section><section id="task-3.4" class="slide level2"><h2>Task 3.4</h2>
<p>See whether a LLM improves your graph: Write a promt for a LLM of choice to create the scatter plot of task 3.2. Come up with further characteristics you could add, and see if the AI model produces a satisfactory graph.</p>
</section></section><section><section id="dataanalysis" class="title-slide slide level1 center"><h1>4. Data Analysis</h1>

</section><section id="consistent-work-with-data-tidyverse" class="slide level2"><h2>Consistent Work with Data: tidyverse</h2>
<p>In this chapter, we will (superficially) cover the package <a href="https://dplyr.tidyverse.org/">dplyr</a>. This package is part of the <a href="https://www.tidyverse.org/">tidyverse</a>, a collection of R packages designed to provide a consistent approach to working with data. The following packages belong to the <a href="https://www.tidyverse.org/">tidyverse</a>:</p>
<ul>
<li><p><a href="https://dplyr.tidyverse.org/">dplyr</a>: “Grammar of Data Manipulation”</p></li>
<li><p><a href="https://ggplot2.tidyverse.org/">ggplot2</a>: “Grammar of Graphics”</p></li>
<li><p><a href="https://readr.tidyverse.org/">readr</a>: “Fast and friendly way to read rectangular data”</p></li>
<li><p><a href="https://tibble.tidyverse.org/">tibble</a>: “A tibble, or tbl_df, is a modern reimagining of the data.frame”</p></li>
<li>
<p><a href="https://tidyr.tidyverse.org/">tidyr</a>: “Create tidy data. Tidy data is data where:</p>
<ol type="1">
<li>Every column is a variable.</li>
<li>Every row is an observation.</li>
<li>Every cell is a single value.”</li>
</ol>
</li>
<li><p><a href="https://purrr.tidyverse.org/">purrr</a>: “Enhance R’s functional programming toolkit”</p></li>
</ul></section><section class="slide level2"><p>An important component of working with data and <code>dplyr</code> is the pipe operator <code>%&gt;%</code>, included in the <code>magrittr</code> package. The goal of this operator (also found in many other languages) is to make function composition more readable in code.</p>
<p>Example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href=""></a><span class="fu">library</span>(dplyr)</span>
<span id="cb109-2"><a href=""></a></span>
<span id="cb109-3"><a href=""></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(x) x <span class="sc">+</span> <span class="dv">10</span></span>
<span id="cb109-4"><a href=""></a>g <span class="ot">&lt;-</span> <span class="cf">function</span>(x) x <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb109-5"><a href=""></a></span>
<span id="cb109-6"><a href=""></a>a <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb109-7"><a href=""></a><span class="fu">f</span>(<span class="fu">g</span>(a))         <span class="co"># 2*a + 10 -&gt; 14</span></span>
<span id="cb109-8"><a href=""></a></span>
<span id="cb109-9"><a href=""></a><span class="do">## Same result using the pipe operator</span></span>
<span id="cb109-10"><a href=""></a>a <span class="sc">%&gt;%</span> <span class="fu">g</span>() <span class="sc">%&gt;%</span> <span class="fu">f</span>()</span>
<span id="cb109-11"><a href=""></a></span>
<span id="cb109-12"><a href=""></a><span class="do">## Parentheses for function calls can be omitted,</span></span>
<span id="cb109-13"><a href=""></a><span class="do">## but for readability, it is helpful to keep them</span></span>
<span id="cb109-14"><a href=""></a>a <span class="sc">%&gt;%</span> g <span class="sc">%&gt;%</span> f</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2">

More examples
<div style="display: flex; gap: 2em;">
<div style="flex: 1;">
<p><strong>dplyr</strong> with <code>%&gt;%</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href=""></a>People <span class="sc">%&gt;%</span></span>
<span id="cb110-2"><a href=""></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Age) <span class="sc">%&gt;%</span></span>
<span id="cb110-3"><a href=""></a>  <span class="fu">summary</span>()</span>
<span id="cb110-4"><a href=""></a></span>
<span id="cb110-5"><a href=""></a></span>
<span id="cb110-6"><a href=""></a>CPS1985 <span class="sc">%&gt;%</span></span>
<span id="cb110-7"><a href=""></a>  <span class="fu">filter</span>(age <span class="sc">&gt;</span> <span class="dv">25</span>) <span class="sc">%&gt;%</span></span>
<span id="cb110-8"><a href=""></a>  <span class="fu">group_by</span>(gender) <span class="sc">%&gt;%</span></span>
<span id="cb110-9"><a href=""></a>  <span class="fu">summarise</span>(<span class="at">mwage =</span> <span class="fu">mean</span>(wage))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div style="flex: 1;">
<p><strong>Standard R</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href=""></a><span class="fu">summary</span>(</span>
<span id="cb111-2"><a href=""></a>  <span class="fu">subset</span>(People, <span class="at">select =</span> Age)</span>
<span id="cb111-3"><a href=""></a>  )</span>
<span id="cb111-4"><a href=""></a></span>
<span id="cb111-5"><a href=""></a>datatemp <span class="ot">&lt;-</span> <span class="fu">subset</span>(CPS1985, age <span class="sc">&gt;</span> <span class="dv">25</span>)</span>
<span id="cb111-6"><a href=""></a><span class="fu">tapply</span>(<span class="at">X =</span> datatemp<span class="sc">$</span>wage,</span>
<span id="cb111-7"><a href=""></a>      <span class="at">INDEX =</span> datatemp<span class="sc">$</span>gender,</span>
<span id="cb111-8"><a href=""></a>      <span class="at">FUN =</span> mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>In the second example, you can already see that the pipe operator often eliminates the need for unnecessary assignments.</p>
</section><section id="dplyr" class="slide level2"><h2><code>dplyr</code></h2>
<p>The key functions of <code>dplyr</code> are:</p>
<ul>
<li><p><a href="https://dplyr.tidyverse.org/reference/mutate.html"><code>mutate()</code></a>: Add new variables to a dataset</p></li>
<li><p><a href="https://dplyr.tidyverse.org/reference/select.html"><code>select()</code></a>: Select variables (columns)</p></li>
<li><p><a href="https://dplyr.tidyverse.org/reference/filter.html"><code>filter()</code></a>: Select observations (rows)</p></li>
<li><p><a href="https://dplyr.tidyverse.org/reference/arrange.html"><code>arrange()</code></a>: Sort observations</p></li>
<li><p><a href="https://dplyr.tidyverse.org/reference/summarise.html"><code>summarise()</code></a>: Reduce variable values of multiple observations to a single value</p></li>
<li><p><a href="https://dplyr.tidyverse.org/reference/group_by.html"><code>group_by()</code></a>: Apply subsequent operations to groups</p></li>
<li><p><code>join()</code>: Merge two datasets</p></li>
</ul>
<p>These functions often have variants and additional helper functions that assist with variable selection.</p>
</section><section class="slide level2"><p>Datasets that are <em>tidy</em> should have each observation as a row and each variable as a column (<code>long</code> format). However, datasets are often found in <code>wide</code> format.</p>
<p>A way to convert <code>wide</code> to <code>long</code> is the <code>pivot_longer()</code> function from <code>tidyr</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href=""></a><span class="fu">library</span>(tidyr) <span class="do">## version 1.0.0</span></span>
<span id="cb112-2"><a href=""></a>data_wide <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>),</span>
<span id="cb112-3"><a href=""></a>                        <span class="at">wage90 =</span> <span class="fu">c</span>(<span class="dv">12</span>,<span class="dv">13</span>,<span class="dv">14</span>,<span class="dv">11</span>),</span>
<span id="cb112-4"><a href=""></a>                        <span class="at">wage95 =</span> <span class="fu">c</span>(<span class="dv">14</span>,<span class="dv">16</span>,<span class="dv">13</span>,<span class="dv">18</span>))</span>
<span id="cb112-5"><a href=""></a></span>
<span id="cb112-6"><a href=""></a>data_long <span class="ot">&lt;-</span> data_wide <span class="sc">%&gt;%</span></span>
<span id="cb112-7"><a href=""></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"wage"</span>), <span class="co"># Select columns #&lt;&lt;</span></span>
<span id="cb112-8"><a href=""></a>               <span class="at">names_to =</span> <span class="st">"year"</span>,          <span class="co"># New column name #&lt;&lt;</span></span>
<span id="cb112-9"><a href=""></a>               <span class="at">values_to =</span> <span class="st">"wage"</span>)         <span class="co"># New column for values #&lt;&lt;</span></span>
<span id="cb112-10"><a href=""></a></span>
<span id="cb112-11"><a href=""></a><span class="fu">class</span>(data_long) <span class="co"># tbl_df, tbl, data.frame</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="a-single-variable" class="slide level2"><h2>A Single Variable</h2>
<p>Measures of central tendency:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href=""></a><span class="do">## Continuous variable</span></span>
<span id="cb113-2"><a href=""></a>CPS1985 <span class="sc">%&gt;%</span></span>
<span id="cb113-3"><a href=""></a>  <span class="fu">summarise</span>(<span class="at">mean_wage =</span> <span class="fu">mean</span>(wage),</span>
<span id="cb113-4"><a href=""></a>            <span class="at">sd_wage =</span> <span class="fu">sd</span>(wage),</span>
<span id="cb113-5"><a href=""></a>            <span class="at">med_wage =</span> <span class="fu">median</span>(wage),</span>
<span id="cb113-6"><a href=""></a>            <span class="at">min_wage =</span> <span class="fu">min</span>(wage),</span>
<span id="cb113-7"><a href=""></a>            <span class="at">q1_wage =</span> <span class="fu">quantile</span>(wage,<span class="fl">0.25</span>))</span>
<span id="cb113-8"><a href=""></a></span>
<span id="cb113-9"><a href=""></a><span class="do">## For simple cases, this also works:</span></span>
<span id="cb113-10"><a href=""></a><span class="fu">summary</span>(CPS1985<span class="sc">$</span>wage)</span>
<span id="cb113-11"><a href=""></a></span>
<span id="cb113-12"><a href=""></a><span class="do">## Discrete variable</span></span>
<span id="cb113-13"><a href=""></a><span class="fu">table</span>(CPS1985<span class="sc">$</span>occupation)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="graphical-representation" class="slide level2"><h2>Graphical Representation</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href=""></a><span class="do">## Lambda expression and dot placeholder</span></span>
<span id="cb114-2"><a href=""></a>CPS1985 <span class="sc">%&gt;%</span></span>
<span id="cb114-3"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">lwage =</span> <span class="fu">log</span>(wage)) <span class="sc">%&gt;%</span></span>
<span id="cb114-4"><a href=""></a>  <span class="fu">select</span>(lwage) <span class="sc">%&gt;%</span> {</span>
<span id="cb114-5"><a href=""></a>    lwage <span class="ot">&lt;-</span> .[,<span class="dv">1</span>]     <span class="co"># '.' represents the value from the left </span></span>
<span id="cb114-6"><a href=""></a>                       <span class="co"># side before the last pipe operator</span></span>
<span id="cb114-7"><a href=""></a>    <span class="fu">hist</span>(lwage)        <span class="co"># Equivalent to CPS1985 %&gt;% select(wage)</span></span>
<span id="cb114-8"><a href=""></a>  }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="multiple-variables" class="slide level2"><h2>Multiple Variables</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href=""></a><span class="do">## Multiple continuous variables</span></span>
<span id="cb115-2"><a href=""></a>CPS1985 <span class="sc">%&gt;%</span></span>
<span id="cb115-3"><a href=""></a>  <span class="fu">select</span>(wage, education, age) <span class="sc">%&gt;%</span> {</span>
<span id="cb115-4"><a href=""></a>    <span class="fu">pairs</span>(.)</span>
<span id="cb115-5"><a href=""></a>    <span class="fu">cor</span>(.)</span>
<span id="cb115-6"><a href=""></a>  }</span>
<span id="cb115-7"><a href=""></a></span>
<span id="cb115-8"><a href=""></a><span class="do">## Discrete variables (frequency tables)</span></span>
<span id="cb115-9"><a href=""></a>CPS1985 <span class="sc">%&gt;%</span></span>
<span id="cb115-10"><a href=""></a>  <span class="fu">group_by</span>(gender, sector) <span class="sc">%&gt;%</span></span>
<span id="cb115-11"><a href=""></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span>
<span id="cb115-12"><a href=""></a></span>
<span id="cb115-13"><a href=""></a><span class="do">## Alternative:</span></span>
<span id="cb115-14"><a href=""></a><span class="fu">with</span>(CPS1985,</span>
<span id="cb115-15"><a href=""></a>     <span class="fu">ftable</span>(gender, sector)</span>
<span id="cb115-16"><a href=""></a>)</span>
<span id="cb115-17"><a href=""></a><span class="do">## Or also:</span></span>
<span id="cb115-18"><a href=""></a><span class="fu">xtabs</span>(<span class="sc">~</span>gender <span class="sc">+</span> sector, <span class="at">data =</span> CPS1985)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="task-4.1" class="slide level2"><h2>Task 4.1</h2>
<p>Use the wide-format temperature data set <code>temperature</code>.</p>
<ol type="1">
<li><p>Add the variable <code>tempF</code> (temperature in Fahrenheit) to the dataset using <code>mutate()</code> and the pipe operator.</p></li>
<li><p>Compute, grouped by city and year, the mean temperature and standard deviation.</p></li>
<li><p>Find the coolest and warmest day for each city.</p></li>
<li><p>Add a variable <code>lowest_temperature</code> to the dataset, which remains constant within each <code>city</code> group and corresponds to the lowest temperature in that respective group. Do the same for <code>highest_temperature</code></p></li>
<li><p>Sort the dataset within city groups by temperature.</p></li>
</ol></section><section id="task-4.2" class="slide level2"><h2>Task 4.2</h2>
<p>Create a histogram of the daily temperatures in Eindhoven.</p>
<ol type="1">
<li><p>Overlay the density function of a normal distribution with the same mean and variance as the temperatures in Eindhoven.</p></li>
<li><p>Draw the mean as a dashed line.</p></li>
<li><p>Use a polygon to shade the area under the density function up to the 25% quantile.</p></li>
</ol>
<p>Hints: Use dnorm() with mean() and sd() to define the normal density curve. Use polygon() for shading and abline() for the dashed line.</p>
</section><section id="task-4.3" class="slide level2"><h2>Task 4.3</h2>
<p>The code on the next slide collects climate data for Dutch cities in long format. Use <code>dplyr</code> to</p>
<ol type="1">
<li>find the warmest and coldest day in Maastricht</li>
<li>find the city with the highest average temperature in 2023 and the one with the lowest average temperature</li>
<li>count the number of rainy days (<code>I_RAIN_DRIZZLE</code>) and identify the city with the highest and lowest number of rainy days.</li>
<li>identify the cities with the highest and lowest average rainfall (<code>PRCP</code>, hint: use na.rm = TRUE to get rid of the NA values)</li>
<li>Modify the code to get a time series for Maastricht only. Plot minimum, maximum and average temperature across time.</li>
</ol></section><section class="slide level2"><div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href=""></a><span class="co"># Install if needed</span></span>
<span id="cb116-2"><a href=""></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">"dplyr"</span>, <span class="st">"lubridate"</span>, <span class="st">"GSODR"</span>))</span>
<span id="cb116-3"><a href=""></a></span>
<span id="cb116-4"><a href=""></a><span class="co"># Load libraries</span></span>
<span id="cb116-5"><a href=""></a><span class="fu">library</span>(dplyr)</span>
<span id="cb116-6"><a href=""></a><span class="fu">library</span>(lubridate)</span>
<span id="cb116-7"><a href=""></a><span class="fu">library</span>(GSODR)</span>
<span id="cb116-8"><a href=""></a><span class="co"># list of Dutch cities </span></span>
<span id="cb116-9"><a href=""></a>cities <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb116-10"><a href=""></a>  <span class="at">city =</span> <span class="fu">c</span>(<span class="st">"Amsterdam"</span>, <span class="st">"Rotterdam"</span>, <span class="st">"The Hague"</span>, <span class="st">"Utrecht"</span>, <span class="st">"Eindhoven"</span>, <span class="st">"Tilburg"</span>, <span class="st">"Groningen"</span>, <span class="st">"Almere"</span>, <span class="st">"Breda"</span>, <span class="st">"Nijmegen"</span>, <span class="st">"Enschede"</span>, <span class="st">"Haarlem"</span>, <span class="st">"Arnhem"</span>, <span class="st">"Zaanstad"</span>, <span class="st">"Maastricht"</span>, <span class="st">"Apeldoorn"</span>),</span>
<span id="cb116-11"><a href=""></a>  <span class="at">lat =</span> <span class="fu">c</span>(<span class="fl">52.37</span>, <span class="fl">51.92</span>, <span class="fl">52.08</span>, <span class="fl">52.09</span>, <span class="fl">51.44</span>, <span class="fl">51.56</span>, <span class="fl">53.22</span>, <span class="fl">52.37</span>, <span class="fl">51.59</span>, <span class="fl">51.84</span>, <span class="fl">52.22</span>, <span class="fl">52.39</span>, <span class="fl">51.98</span>, <span class="fl">52.45</span>, <span class="fl">50.85</span>, <span class="fl">52.21</span>),</span>
<span id="cb116-12"><a href=""></a>  <span class="at">lon =</span> <span class="fu">c</span>(<span class="fl">4.89</span>, <span class="fl">4.48</span>, <span class="fl">4.30</span>, <span class="fl">5.11</span>, <span class="fl">5.48</span>, <span class="fl">5.09</span>, <span class="fl">6.57</span>, <span class="fl">5.22</span>, <span class="fl">4.78</span>, <span class="fl">5.85</span>, <span class="fl">6.89</span>, <span class="fl">4.64</span>, <span class="fl">5.92</span>, <span class="fl">4.81</span>, <span class="fl">5.69</span>, <span class="fl">5.97</span>)</span>
<span id="cb116-13"><a href=""></a>)</span>
<span id="cb116-14"><a href=""></a></span>
<span id="cb116-15"><a href=""></a><span class="co"># Find closest weather stations</span></span>
<span id="cb116-16"><a href=""></a>cities<span class="sc">$</span>stations <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">NROW</span>(cities), <span class="cf">function</span>(j){</span>
<span id="cb116-17"><a href=""></a>    <span class="fu">nearest_stations</span>(cities<span class="sc">$</span>lat[j], cities<span class="sc">$</span>lon[j], <span class="dv">100</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb116-18"><a href=""></a>    <span class="fu">filter</span>(END <span class="sc">&gt;=</span> <span class="dv">20240000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb116-19"><a href=""></a>    .[<span class="fu">which.min</span>(distance_km), ] <span class="sc">%&gt;%</span></span>
<span id="cb116-20"><a href=""></a>    <span class="fu">pull</span>(STNID)</span>
<span id="cb116-21"><a href=""></a>})</span>
<span id="cb116-22"><a href=""></a>weather_data <span class="ot">&lt;-</span> <span class="fu">get_GSOD</span>(<span class="at">years =</span> <span class="dv">2023</span>, <span class="at">station =</span> cities<span class="sc">$</span>stations)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section><section id="flowcontrol" class="title-slide slide level1 center"><h1>5. Flow Control</h1>

</section><section id="general-information-1" class="slide level2"><h2>General Information</h2>
<p>Often, expressions (calculations, estimations, simulations, plots…) should only be executed under certain conditions and/or repeated multiple times. Sometimes an operation is so complex that breaking it down into repeated steps makes it easier to think through and program.</p>
<p>In such cases, we need constructs:</p>
<ul>
<li>Conditional execution (<code>if</code>, <code>else</code>)</li>
<li>Loops (<code>for</code>, <code>while</code>)</li>
<li>Or, as a faster alternative to loops, applying functions to multiple elements simultaneously using different types of <code><a href="https://rdrr.io/r/base/apply.html">apply()</a></code> functions</li>
<li>
<code><a href="https://rdrr.io/r/base/Vectorize.html">Vectorize()</a></code> modifies functions so they can be applied to multiple elements at once</li>
</ul></section><section id="conditional-execution" class="slide level2"><h2>Conditional Execution</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href=""></a><span class="cf">if</span> ( expr ) {</span>
<span id="cb117-2"><a href=""></a>  <span class="do">## some code evaluated if is.logical(expr) == TRUE</span></span>
<span id="cb117-3"><a href=""></a>} <span class="cf">else</span> {</span>
<span id="cb117-4"><a href=""></a>  <span class="do">## some other code</span></span>
<span id="cb117-5"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The entire construct is still an expression and therefore has a value (specifically, the value of the last evaluated expression):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href=""></a>result <span class="ot">&lt;-</span> <span class="cf">if</span> ( <span class="dv">2</span> <span class="sc">&gt;</span> <span class="dv">1</span> ) {</span>
<span id="cb118-2"><a href=""></a>  <span class="dv">2</span>       <span class="do">## last evaluated expression</span></span>
<span id="cb118-3"><a href=""></a>} <span class="cf">else</span> {</span>
<span id="cb118-4"><a href=""></a>  <span class="dv">1</span></span>
<span id="cb118-5"><a href=""></a>}   <span class="do">## result has the value 2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2"><p>Be cautious with vector-valued expressions:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href=""></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">2</span>)</span>
<span id="cb119-2"><a href=""></a>y <span class="sc">&gt;</span> <span class="dv">3</span></span>
<span id="cb119-3"><a href=""></a></span>
<span id="cb119-4"><a href=""></a><span class="cf">if</span>(y <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="st">"Here!"</span>   <span class="do">## only evaluates the first entry of y</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you want to check whether all elements of a vector satisfy a certain property, the quantifiers <code><a href="https://rdrr.io/r/base/any.html">any()</a></code> and <code><a href="https://rdrr.io/r/base/all.html">all()</a></code> are useful:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href=""></a><span class="cf">if</span> ( <span class="fu">all</span>(y <span class="sc">&gt;</span> <span class="dv">0</span>) )         <span class="do">## all() is "TRUE" if the argument is a vector of all TRUE values</span></span>
<span id="cb120-2"><a href=""></a>{</span>
<span id="cb120-3"><a href=""></a>    <span class="fu">print</span>(<span class="st">"All y values are greater than 0"</span>)</span>
<span id="cb120-4"><a href=""></a>}</span>
<span id="cb120-5"><a href=""></a><span class="cf">else</span> {</span>
<span id="cb120-6"><a href=""></a>    <span class="fu">print</span>(<span class="st">"At least one element of y is less than or equal to 0!"</span>)</span>
<span id="cb120-7"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2"><p>Of course, there may be more than two cases to consider, for example:</p>
<p><span class="math display">\[f(x) = \cases{0 \text{ for  } x \leq 5\\
                4 \text{ for  } 0&lt; x \leq 5\\
                6 \text{ otherwise.}}\]</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href=""></a>stepfunction <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb121-2"><a href=""></a>  <span class="cf">if</span> ( x <span class="sc">&lt;=</span> <span class="dv">0</span> ) {</span>
<span id="cb121-3"><a href=""></a>      <span class="dv">0</span></span>
<span id="cb121-4"><a href=""></a>  } <span class="cf">else</span> <span class="cf">if</span> (x <span class="sc">&lt;=</span> <span class="dv">5</span> ) {</span>
<span id="cb121-5"><a href=""></a>      <span class="dv">4</span></span>
<span id="cb121-6"><a href=""></a>  } <span class="cf">else</span> {</span>
<span id="cb121-7"><a href=""></a>      <span class="dv">6</span></span>
<span id="cb121-8"><a href=""></a>  }</span>
<span id="cb121-9"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2"><p>Another option is the <code>switch(expr, ...)</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href=""></a><span class="do">## integer expr</span></span>
<span id="cb122-2"><a href=""></a><span class="cf">switch</span>(<span class="dv">1</span>, <span class="st">"first"</span>, <span class="st">"second"</span>, <span class="st">"abc"</span>)     <span class="do">## -&gt; "first"</span></span>
<span id="cb122-3"><a href=""></a><span class="cf">switch</span>(<span class="dv">2</span>, <span class="st">"first"</span>, <span class="st">"second"</span>, <span class="st">"abc"</span>)     <span class="do">## -&gt; "second"</span></span>
<span id="cb122-4"><a href=""></a><span class="cf">switch</span>(<span class="dv">3</span>, <span class="st">"first"</span>, <span class="st">"second"</span>, <span class="st">"abc"</span>)     <span class="do">## -&gt; "abc"</span></span>
<span id="cb122-5"><a href=""></a></span>
<span id="cb122-6"><a href=""></a><span class="do">## character expr</span></span>
<span id="cb122-7"><a href=""></a><span class="cf">switch</span>(<span class="st">"abc"</span>, <span class="at">a =</span> <span class="st">"first"</span>, <span class="at">b =</span> <span class="st">"second"</span>, <span class="at">abc =</span> <span class="st">"mix"</span>)  <span class="do">## -&gt; "mix"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2"><p>Sometimes we want to check vectorized objects and return a separate value for each entry. For this, we use the <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="cn">NA</span>, <span class="dv">2</span>)</span>
<span id="cb123-2"><a href=""></a><span class="fu">ifelse</span>( <span class="fu">is.na</span>(x), <span class="st">"Missing"</span>, <span class="st">"Not Missing"</span>)</span>
<span id="cb123-3"><a href=""></a></span>
<span id="cb123-4"><a href=""></a><span class="do">## absolute value</span></span>
<span id="cb123-5"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="dv">5</span>, <span class="sc">-</span><span class="dv">8</span>, <span class="dv">2</span>)</span>
<span id="cb123-6"><a href=""></a><span class="fu">ifelse</span>( x <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="sc">-</span>x, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="task-5.1" class="slide level2"><h2>Task 5.1</h2>
<p>Write a function <code>if_test</code> that takes two objects, <code>x</code> and <code>y</code>, and checks whether <code>x</code> is numeric and <code>y</code> is of type character. If both conditions are met, the function should print “Super”; otherwise, it should indicate which of the two objects <code>x</code>/<code>y</code> does not meet the required condition.</p>
<p>Test your function with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href=""></a><span class="fu">if_test</span>(<span class="dv">5</span>, <span class="st">"char"</span>)</span>
<span id="cb124-2"><a href=""></a></span>
<span id="cb124-3"><a href=""></a><span class="fu">if_test</span>(<span class="st">"abc"</span>, <span class="dv">2</span>)</span>
<span id="cb124-4"><a href=""></a></span>
<span id="cb124-5"><a href=""></a><span class="fu">if_test</span>(<span class="fu">list</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="fu">matrix</span>(<span class="st">"a"</span>, <span class="dv">3</span>, <span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Hint: Use <code><a href="https://rdrr.io/r/base/character.html">is.character()</a></code> and <code><a href="https://rdrr.io/r/base/numeric.html">is.numeric()</a></code>.</p>
</section><section id="loops" class="slide level2"><h2>Loops</h2>
<p>Frequently, small code blocks need to be executed multiple times. Loops help with this. In R, there are three types of loops:</p>
<ul>
<li><p><code>repeat{ Code }</code>: A loop that executes <code>Code</code> indefinitely and must be stopped with <code><a href="https://rdrr.io/r/base/Control.html">break</a></code>.</p></li>
<li><p><code>while( Condition) { Code }</code>: The code <code>Code</code> executes as long as <code>is.logical(Condition)</code> evaluates to <code>TRUE</code>.</p></li>
<li><p><code>for (value in values) { Code }</code>: The code <code>Code</code> runs once for each element in the vector <code>values</code>. The variable <code>value</code> takes on the value of each element during each iteration.</p></li>
</ul>
<p>In addition to <code><a href="https://rdrr.io/r/base/Control.html">break</a></code> (which terminates the loop), there is another control command: <code><a href="https://rdrr.io/r/base/Control.html">next</a></code> (which immediately jumps to the next iteration of the loop).</p>
</section><section class="slide level2"><p>Examples</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href=""></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"One"</span>,<span class="st">"Two"</span>,<span class="st">"Three"</span>)</span>
<span id="cb125-2"><a href=""></a><span class="cf">for</span> (v <span class="cf">in</span> vec) <span class="fu">print</span>(v)</span>
<span id="cb125-3"><a href=""></a></span>
<span id="cb125-4"><a href=""></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb125-5"><a href=""></a>  <span class="fu">print</span>(i <span class="sc">+</span> <span class="dv">2</span>)</span>
<span id="cb125-6"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The following would yield the same result as the latter for loop:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href=""></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb126-2"><a href=""></a><span class="fu">print</span>(i <span class="sc">+</span> <span class="dv">2</span>)</span>
<span id="cb126-3"><a href=""></a>i <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb126-4"><a href=""></a><span class="fu">print</span>(i <span class="sc">+</span> <span class="dv">2</span>)</span>
<span id="cb126-5"><a href=""></a><span class="co"># ...</span></span>
<span id="cb126-6"><a href=""></a>i <span class="ot">&lt;-</span> <span class="dv">9</span></span>
<span id="cb126-7"><a href=""></a><span class="fu">print</span>(i <span class="sc">+</span> <span class="dv">2</span>)</span>
<span id="cb126-8"><a href=""></a>i <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb126-9"><a href=""></a><span class="fu">print</span>(i <span class="sc">+</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2"><p>Expressions in constructs are evaluated in the environment in which they are called. Thus, the variable <code>i</code> has the value 100 after executing the loop:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href=""></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>) {</span>
<span id="cb127-2"><a href=""></a>  <span class="do">## some code using the variable i</span></span>
<span id="cb127-3"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>All these constructs can, of course, be freely combined:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href=""></a>control <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb128-2"><a href=""></a><span class="cf">while</span> (control){</span>
<span id="cb128-3"><a href=""></a>  <span class="cf">if</span> (a <span class="sc">&gt;</span> b){</span>
<span id="cb128-4"><a href=""></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq</span>(<span class="at">along =</span> longObject)){</span>
<span id="cb128-5"><a href=""></a>      <span class="do">## do something with i</span></span>
<span id="cb128-6"><a href=""></a>    }</span>
<span id="cb128-7"><a href=""></a>    <span class="cf">if</span> (error) <span class="cf">break</span></span>
<span id="cb128-8"><a href=""></a>  } <span class="cf">else</span> {</span>
<span id="cb128-9"><a href=""></a>    <span class="cf">next</span></span>
<span id="cb128-10"><a href=""></a>  }</span>
<span id="cb128-11"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="example-numerical-optimization-of-a-function" class="slide level2"><h2>Example: Numerical Optimization of a Function</h2>
<p>Algorithmic idea (very naive, thus not suitable for practical use):<br> We want to numerically find the maximum of a downward-opening parabola. We start at a value where we are sure that the parabola is still increasing, move stepwise to the right while checking whether the value of the parabola is still increasing significantly. If this is not the case, we stop:</p>

<img data-src="PIR_quardo_files/figure-revealjs/parabel-1.png" width="960" class="r-stretch"></section><section class="slide level2"><p>Code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href=""></a>parabola <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="sc">-</span>x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb129-2"><a href=""></a></span>
<span id="cb129-3"><a href=""></a>xx <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">2</span>          <span class="do">## here we start</span></span>
<span id="cb129-4"><a href=""></a>yy <span class="ot">&lt;-</span> <span class="fu">parabola</span>(xx) <span class="do">## what is the value of the parabola here?</span></span>
<span id="cb129-5"><a href=""></a></span>
<span id="cb129-6"><a href=""></a>dY <span class="ot">&lt;-</span> <span class="dv">1</span>           <span class="do">## we initialize a value so that while() does not terminate immediately</span></span>
<span id="cb129-7"><a href=""></a><span class="cf">while</span>( dY <span class="sc">&gt;</span> <span class="fl">0.0000001</span>){</span>
<span id="cb129-8"><a href=""></a>  xx <span class="ot">&lt;-</span> xx <span class="sc">+</span> <span class="fl">0.01</span>       <span class="do">## move xx one step to the right</span></span>
<span id="cb129-9"><a href=""></a>  yyNew <span class="ot">&lt;-</span> <span class="fu">parabola</span>(xx)  <span class="do">## what is the value of the parabola at the new xx?</span></span>
<span id="cb129-10"><a href=""></a>  dY <span class="ot">&lt;-</span> yyNew <span class="sc">-</span> yy      <span class="do">## by how much did the value of the parabola increase in this step?</span></span>
<span id="cb129-11"><a href=""></a>                        <span class="do">## this dY is used before the next loop iteration to check</span></span>
<span id="cb129-12"><a href=""></a>                        <span class="do">## whether the condition dY &gt;0.0000001 is still met.</span></span>
<span id="cb129-13"><a href=""></a>  yy <span class="ot">&lt;-</span> yyNew           <span class="do">## make yy the new value for the next loop iteration</span></span>
<span id="cb129-14"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="task-5.2" class="slide level2"><h2>Task 5.2</h2>
<ol type="1">
<li>Compute the matrix product of A and B without using the <code>%*%</code> operator. Use one or more loops and something like <br><code>sum(A[1,] * B[,1])</code> for <code>C[1,1]</code>, etc.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href=""></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>,<span class="dv">4</span>,<span class="dv">3</span>)</span>
<span id="cb130-2"><a href=""></a>B <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>,<span class="dv">3</span>,<span class="dv">3</span>)</span>
<span id="cb130-3"><a href=""></a>C <span class="ot">&lt;-</span> A <span class="sc">%*%</span> B</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Now create a function <code>mat_mult</code> from the loops of the previous subtask, which, when given two matrices, computes their product but first checks with <code>if</code> whether the row length of one matrix matches the column length of the other matrix. Test this with the matrices above.</li>
</ol></section><section id="task-5.3" class="slide level2"><h2>Task 5.3</h2>
<ul>
<li><p>Write a function <code>optimizer</code> that, when given a (real-valued) function, numerically searches for its optimum. Use the example code above.</p></li>
<li><p>Instead of the optimization method used above, try implementing a bisection method. See the Wikipedia article on the <a href="https://en.wikipedia.org/wiki/Bisection_method">Bisection Method</a>.<br> Hint: To compute the derivative of a function <code>fun</code> at a point <code>x</code>, you can use the function <code><a href="https://rdrr.io/r/stats/numericDeriv.html">numericDeriv()</a></code> from the <code>stats</code> package as follows:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href=""></a>env.o2 <span class="ot">&lt;-</span> <span class="fu">new.env</span>()</span>
<span id="cb131-2"><a href=""></a>dfun <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb131-3"><a href=""></a>    <span class="fu">assign</span>(<span class="st">"x"</span>,x, <span class="at">envir =</span> env.o2)</span>
<span id="cb131-4"><a href=""></a>    <span class="fu">attr</span>(<span class="fu">numericDeriv</span>(<span class="fu">quote</span>(<span class="fu">fun</span>(x)), <span class="st">"x"</span>, <span class="at">rho =</span> env.o2), <span class="at">which =</span> <span class="st">"gradient"</span>)[<span class="dv">1</span>,<span class="dv">1</span>]</span>
<span id="cb131-5"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="apply-constructs" class="slide level2"><h2>apply Constructs</h2>
<p>Loops in R are relatively slow and can sometimes lead to less readable code. Where possible, loops should be avoided. Often, a loop can be replaced by vectorization (with extreme performance gains since loops are then executed in C rather than in R).</p>
<p>In addition, R provides a family of <code>apply</code> constructs that enable vectorized operations.</p>
</section><section class="slide level2"><p>For working with matrices and arrays, the <code><a href="https://rdrr.io/r/base/apply.html">apply()</a></code> function is available. This function can apply suitable functions to rows or columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href=""></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">6</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">4</span>, <span class="dv">1</span>), <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb132-2"><a href=""></a> <span class="do">## row-wise maximum:</span></span>
<span id="cb132-3"><a href=""></a><span class="fu">apply</span>(<span class="at">X =</span> A,            <span class="do">## an array or a matrix</span></span>
<span id="cb132-4"><a href=""></a>      <span class="at">MARGIN =</span> <span class="dv">1</span>,       <span class="do">## Over which indices should the function be applied</span></span>
<span id="cb132-5"><a href=""></a>                        <span class="do">##  (1 -&gt; rows, 2 -&gt; columns)</span></span>
<span id="cb132-6"><a href=""></a>      <span class="at">FUN =</span> max         <span class="do">## which function should be applied?</span></span>
<span id="cb132-7"><a href=""></a>)</span>
<span id="cb132-8"><a href=""></a></span>
<span id="cb132-9"><a href=""></a>X <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb132-10"><a href=""></a>  <span class="fu">matrix</span>(<span class="at">ncol =</span> <span class="dv">10</span>)</span>
<span id="cb132-11"><a href=""></a></span>
<span id="cb132-12"><a href=""></a><span class="fu">apply</span>(X, <span class="dv">2</span>, var)        <span class="do">## Variances of the columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2"><p>Often, lists are available, and a function needs to be applied to each element, returning a list as a result. The <code><a href="https://rdrr.io/r/base/lapply.html">lapply()</a></code> function serves this purpose.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href=""></a>List <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">a=</span><span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">8</span>,<span class="dv">7</span>),</span>
<span id="cb133-2"><a href=""></a>  <span class="at">b=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">5</span>),</span>
<span id="cb133-3"><a href=""></a>  <span class="at">c=</span><span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>)</span>
<span id="cb133-4"><a href=""></a>)</span>
<span id="cb133-5"><a href=""></a></span>
<span id="cb133-6"><a href=""></a>ListSum <span class="ot">&lt;-</span> <span class="fu">lapply</span>(List, sum)</span>
<span id="cb133-7"><a href=""></a><span class="fu">class</span>(ListSum)            <span class="do">## returns a list</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Often, the result does not need to be a list but rather a vector (or a matrix/array). This is achieved using <code><a href="https://rdrr.io/r/base/lapply.html">sapply()</a></code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href=""></a>ListSum <span class="ot">&lt;-</span> <span class="fu">sapply</span>(List, sum)</span>
<span id="cb134-2"><a href=""></a><span class="fu">class</span>(ListSum)           <span class="do">## "numeric"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2"><p>All members of the apply family accept the <code>...</code> argument, allowing additional parameters to be passed to the function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href=""></a><span class="do">## custom function</span></span>
<span id="cb135-2"><a href=""></a>funnyFun <span class="ot">&lt;-</span> <span class="cf">function</span>(x, m, std) <span class="fu">sum</span>(x)<span class="sc">/</span>( <span class="dv">2</span> <span class="sc">*</span> <span class="fu">rnorm</span>(<span class="dv">1</span>, <span class="at">mean=</span>m, <span class="at">sd=</span>std))</span>
<span id="cb135-3"><a href=""></a></span>
<span id="cb135-4"><a href=""></a><span class="do">## using `...` to pass 'm' and 'std' to funnyFun:</span></span>
<span id="cb135-5"><a href=""></a><span class="fu">sapply</span>(<span class="at">X=</span>List, <span class="at">FUN=</span>funnyFun, <span class="at">m=</span><span class="dv">2</span>, <span class="at">std=</span><span class="dv">5</span>)</span>
<span id="cb135-6"><a href=""></a></span>
<span id="cb135-7"><a href=""></a><span class="do">## also works for plotting:</span></span>
<span id="cb135-8"><a href=""></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="fu">length</span>(List),<span class="dv">1</span>))</span>
<span id="cb135-9"><a href=""></a><span class="fu">lapply</span>(List, plot, <span class="at">main=</span><span class="st">"Title"</span>, <span class="at">type=</span><span class="st">"l"</span>, <span class="at">lwd=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="task-5.4" class="slide level2"><h2>Task 5.4</h2>
<p>Create a <span class="math inline">\(10\times 10\)</span> matrix where the <span class="math inline">\(ij\)</span>-th element is given by <span class="math inline">\((i\cdot j)^{(1/j)}\)</span>. Use two nested loops for this. Then, compute the row and column sums of this matrix using an <code>apply</code> function of your choice.</p>
</section><section id="additional-useful-language-elements" class="slide level2"><h2>Additional Useful Language Elements</h2>
<p>Sometimes, objects need to be created dynamically with names dependent on other variables and later retrieved. This cannot be done using <code>&lt;-</code>. Therefore, R provides the functions <code><a href="https://rdrr.io/r/base/assign.html">assign()</a></code> and <code><a href="https://rdrr.io/r/base/get.html">get()</a></code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href=""></a>objectName <span class="ot">&lt;-</span> <span class="st">"x"</span></span>
<span id="cb136-2"><a href=""></a></span>
<span id="cb136-3"><a href=""></a><span class="do">## The following assignments are equivalent:</span></span>
<span id="cb136-4"><a href=""></a>x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb136-5"><a href=""></a><span class="fu">assign</span>(<span class="st">"x"</span>, <span class="dv">2</span>)</span>
<span id="cb136-6"><a href=""></a><span class="fu">assign</span>(objectName, <span class="dv">2</span>)</span>
<span id="cb136-7"><a href=""></a></span>
<span id="cb136-8"><a href=""></a><span class="do">## Retrieve the value of object "x"</span></span>
<span id="cb136-9"><a href=""></a><span class="fu">get</span>(objectName)   <span class="do">## -&gt; 2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2"><p>Further example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href=""></a><span class="do">## Depending on the value of x, either mean() or sum() is executed</span></span>
<span id="cb137-2"><a href=""></a>myFunc1 <span class="ot">&lt;-</span> mean</span>
<span id="cb137-3"><a href=""></a>myFunc2 <span class="ot">&lt;-</span> sum</span>
<span id="cb137-4"><a href=""></a></span>
<span id="cb137-5"><a href=""></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb137-6"><a href=""></a><span class="fu">get</span>(<span class="fu">paste</span>(<span class="st">"myFunc"</span>,x,<span class="at">sep=</span><span class="st">""</span>))(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)     <span class="do">## mean()</span></span>
<span id="cb137-7"><a href=""></a>x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb137-8"><a href=""></a><span class="fu">get</span>(<span class="fu">paste</span>(<span class="st">"myFunc"</span>,x,<span class="at">sep=</span><span class="st">""</span>))(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)     <span class="do">## sum()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2"><p>Another example demonstrating the usefulness of <code><a href="https://rdrr.io/r/base/assign.html">assign()</a></code>: <br> Store the <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> output of each variable in the <code>CPS1985</code> dataset as <code>summary_{VariableName}</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href=""></a><span class="fu">names</span>(CPS1985)</span>
<span id="cb138-2"><a href=""></a><span class="cf">for</span>(variable <span class="cf">in</span> <span class="fu">names</span>(CPS1985))</span>
<span id="cb138-3"><a href=""></a>{</span>
<span id="cb138-4"><a href=""></a>    <span class="fu">assign</span>(<span class="fu">paste</span>(<span class="st">"summary_"</span>, variable, <span class="at">sep =</span> <span class="st">""</span>), <span class="fu">summary</span>(<span class="fu">get</span>(variable)))</span>
<span id="cb138-5"><a href=""></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"summary_"</span>, variable, <span class="at">sep =</span> <span class="st">""</span>))</span>
<span id="cb138-6"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>What exactly is happening here?</p>
</section><section class="slide level2"><p>Break it down step by step:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href=""></a><span class="do">## Loop iterates over values:</span></span>
<span id="cb139-2"><a href=""></a><span class="fu">names</span>(CPS1985)</span>
<span id="cb139-3"><a href=""></a></span>
<span id="cb139-4"><a href=""></a><span class="do">## First iteration:</span></span>
<span id="cb139-5"><a href=""></a>variable <span class="ot">&lt;-</span> <span class="fu">names</span>(CPS1985)[<span class="dv">1</span>]</span>
<span id="cb139-6"><a href=""></a>variable</span>
<span id="cb139-7"><a href=""></a><span class="fu">get</span>(variable)</span>
<span id="cb139-8"><a href=""></a><span class="fu">summary</span>(<span class="fu">get</span>(variable))</span>
<span id="cb139-9"><a href=""></a><span class="fu">paste</span>(<span class="st">"summary_"</span>, variable, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb139-10"><a href=""></a><span class="fu">assign</span>(<span class="fu">paste</span>(<span class="st">"summary_"</span>, variable, <span class="at">sep =</span> <span class="st">""</span>), <span class="fu">summary</span>(<span class="fu">get</span>(variable)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="error-handling" class="slide level2"><h2>Error Handling</h2>
<p>Often, it is not known in advance whether executing code will result in errors.</p>
<ul>
<li>One option: Check all cases that might lead to errors before execution.</li>
<li>Another (pragmatic) approach is to use language elements for <strong>error handling</strong>, which are present in many programming languages:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href=""></a>value <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>({</span>
<span id="cb140-2"><a href=""></a>  <span class="do">## some code to be evaluated</span></span>
<span id="cb140-3"><a href=""></a>  expr</span>
<span id="cb140-4"><a href=""></a>}, <span class="at">warning =</span> <span class="cf">function</span>(w){</span>
<span id="cb140-5"><a href=""></a>  <span class="do">## code evaluated if evaluating expr leads to a warning</span></span>
<span id="cb140-6"><a href=""></a>  <span class="fu">print</span>(w)</span>
<span id="cb140-7"><a href=""></a>}, <span class="at">error =</span> <span class="cf">function</span>(e){</span>
<span id="cb140-8"><a href=""></a>  <span class="do">## code evaluated if evaluating expr leads to an error</span></span>
<span id="cb140-9"><a href=""></a>  <span class="fu">print</span>(e)</span>
<span id="cb140-10"><a href=""></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="recursion" class="slide level2"><h2>Recursion</h2>
<p>Sometimes quite useful: recursive functions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href=""></a>factorial <span class="ot">&lt;-</span> <span class="cf">function</span>(n){</span>
<span id="cb141-2"><a href=""></a>  <span class="cf">if</span> (n<span class="sc">&lt;</span><span class="dv">0</span>) <span class="fu">stop</span>(<span class="st">"Factorial only for positive integers"</span>)</span>
<span id="cb141-3"><a href=""></a></span>
<span id="cb141-4"><a href=""></a>  <span class="cf">if</span> (n<span class="sc">&lt;</span><span class="dv">2</span>) <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb141-5"><a href=""></a></span>
<span id="cb141-6"><a href=""></a>  n <span class="sc">*</span> <span class="fu">factorial</span>(n<span class="dv">-1</span>)</span>
<span id="cb141-7"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="task-5.5" class="slide level2"><h2>Task 5.5</h2>
<ol type="1">
<li>Replace the loop over the variable with an apply construct.</li>
<li>How can the use of <code>assign</code> and <code>get</code> be avoided for this problem?</li>
</ol></section><section id="task-5.6" class="slide level2"><h2>Task 5.6</h2>
<p>Write a function named “fib” that, given a natural number <code>n</code>, computes the <code>n</code>-th Fibonacci number. The Fibonacci sequence is defined recursively as follows:</p>
<p><span class="math inline">\(a_0=0\)</span>, <span class="math inline">\(a_1=1\)</span>, and <span class="math inline">\(a_n=a_{n-1}+a_{n-2}\)</span>.</p>
</section><section id="task-5.6-1" class="slide level2"><h2>Task 5.6</h2>
<p>Reconsider the wide-format temperature data set <code>temperature</code>. You want to identify the day when the temperature was equal to or closest to 20 degrees for De Bilt in 2024. Your task is to write a loop that searches for this temperature value, using a half-way (binary-like) search approach.</p>
<p>Steps:</p>
<ul>
<li>Extract the daily temperature data for De Bilt and sort it in ascending order.</li>
<li>Write a loop (e.g., a while loop or a repeat loop) that:
<ul>
<li>Starts with the full range of the sorted vector.</li>
<li>Checks the temperature at the halfway index.</li>
<li>If it is lower than 20, search the upper half; if greater or equal, search the lower half.</li>
<li>Continue until you find the index of the value closest to 20. Print:</li>
</ul>
</li>
<li>The temperature found</li>
<li>The date</li>
<li>The number of steps your loop needed to find it</li>
</ul></section></section><section><section id="regression" class="title-slide slide level1 center"><h1>6. Regression</h1>

</section><section id="general-information-2" class="slide level2"><h2>General Information</h2>
<p>In econometrics (which can also be applied to other scientific fields), we often ask questions like:</p>
<ul>
<li>Does income convergence occur (does a low income level lead to higher growth in the future, ceteris paribus)?</li>
<li>Is education an important determinant of growth?</li>
<li>Does foreign trade accelerate growth?</li>
<li>Is political stability important / does violence hinder economic prosperity?</li>
<li>Is growth slower in Africa, ceteris paribus?</li>
</ul>
<p>The standard tool for such analyses: <strong>multiple linear regression model</strong></p>
<p><span class="math display">\[y_i = \beta_0 + \beta_1 x_{1,i} + \beta_2 x_{2,i} + \dots + \beta_p x_{p,i} + u_i,\ i=1,\dots,n\]</span> Or, in matrix notation: <span class="math display">\[\mathbf{y} = \mathbf{X}\beta + \mathbf{u},\]</span> where <span class="math inline">\(\mathbf{y}, \mathbf{u}\in\mathbb{R}^{n}\)</span>, <span class="math inline">\(\mathbf{X}\in\mathbb{R}^{n\times k}\)</span>, <span class="math inline">\(\beta\in\mathbb{R}^{k}\)</span>, and <span class="math inline">\(k = p + 1\)</span>.</p>
</section><section id="formula-objects" class="slide level2"><h2>Formula Objects</h2>
<p>R is designed to easily estimate various statistical models. It provides a specific object class to symbolically describe statistical models, called <code>formula</code> objects. See <code><a href="https://rdrr.io/r/stats/formula.html">?formula</a></code> for more details.</p>
<p>Example: the regression model</p>
<p><span class="math inline">\(y_i = \beta_0 + \beta_1 x_{1,i} + \beta_2 x_{2,i} + u_i\)</span></p>
<p>can be specified in R as a <code>formula</code> like this:</p>
<p><code>y ~ x1 + x2</code></p>
</section><section class="slide level2"><ul>
<li>
<p>Important operators:</p>
<ul>
<li>
<code>~</code>: Basis for all models. <code>y ~ model</code> specifies that the dependent variable <code>y</code> is modeled using the linear predictors described in <code>model</code>.</li>
<li>
<code>+</code>: Models consist of terms separated by <code>+</code> (in simple cases, these are variables).</li>
<li>
<code>:</code>: Creates interaction terms between variables.</li>
<li>
<code>*</code>: <code>a*b</code> is equivalent to <code>a + b + a:b</code>.</li>
<li>
<code>^</code>: <code>(a + b)^2</code> is equivalent to <code>(a + b) * (a + b)</code>.</li>
</ul>
</li>
<li><p>Note: <code>y ~ x1 + x2^2</code> is NOT the model <span class="math inline">\(y_i = \beta_0 + \beta_1 x_{1,i} + \beta_2 x^2_{2,i} + u_i\)</span>!</p></li>
<li><p>For arithmetic expressions (e.g., variable transformations), use the function <code><a href="https://rdrr.io/r/base/AsIs.html">I()</a></code>: <br><code>y ~ x1 + I(x2^2)</code>.</p></li>
<li><p>Factor variables in formulas are automatically <em>dummy coded</em>.</p></li>
</ul></section><section class="slide level2"><p>The standard function for estimating linear models is <code><a href="https://rdrr.io/r/stats/lm.html">lm()</a></code>. This function returns an <code>lm</code> object with numerous available methods: <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>, <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code>, <code><a href="https://rdrr.io/r/stats/predict.html">predict()</a></code>, etc.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href=""></a><span class="fu">library</span>(AER)</span>
<span id="cb142-2"><a href=""></a><span class="fu">data</span>(GrowthSW)</span>
<span id="cb142-3"><a href=""></a></span>
<span id="cb142-4"><a href=""></a>growth.eq1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(growth <span class="sc">~</span> rgdp60,</span>
<span id="cb142-5"><a href=""></a>                 <span class="at">data=</span>GrowthSW)</span>
<span id="cb142-6"><a href=""></a><span class="fu">summary</span>(growth.eq1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2"><p>Output:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = growth ~ rgdp60, data = GrowthSW)

Residuals:
    Min      1Q  Median      3Q     Max 
-4.6309 -1.0485  0.0831  0.8722  5.3183 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 1.796e+00  3.780e-01   4.751 1.21e-05 ***
rgdp60      4.735e-05  9.494e-05   0.499     0.62    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.908 on 63 degrees of freedom
Multiple R-squared:  0.003932,  Adjusted R-squared:  -0.01188 
F-statistic: 0.2487 on 1 and 63 DF,  p-value: 0.6197</code></pre>
</div>
</div>
</section><section class="slide level2"><p>Multiple variables, transformations:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href=""></a>growth.eq2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(growth <span class="sc">~</span> rgdp60 <span class="sc">+</span> tradeshare <span class="sc">+</span></span>
<span id="cb144-2"><a href=""></a>                 education <span class="sc">+</span> <span class="fu">I</span>(education<span class="sc">^</span><span class="dv">2</span>) <span class="sc">+</span> <span class="co"># education linear and squared</span></span>
<span id="cb144-3"><a href=""></a>                 revolutions <span class="sc">+</span> assassinations, <span class="at">data =</span> GrowthSW)</span>
<span id="cb144-4"><a href=""></a>sum.eq2 <span class="ot">&lt;-</span> <span class="fu">summary</span>(growth.eq2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Without intercept:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href=""></a>growth.eq3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(growth <span class="sc">~</span> <span class="sc">-</span><span class="dv">1</span> <span class="sc">+</span> rgdp60 <span class="sc">+</span> tradeshare, <span class="at">data =</span> GrowthSW)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>All variables in the dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href=""></a>growth.eq4 <span class="ot">&lt;-</span> <span class="fu">lm</span>(growth <span class="sc">~</span> ., <span class="at">data =</span> GrowthSW)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Excluding specific variables:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href=""></a>growth.eq5 <span class="ot">&lt;-</span> <span class="fu">lm</span>(growth <span class="sc">~</span> . <span class="sc">-</span>rgdp60, <span class="at">data =</span> GrowthSW)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2"><p>With factor variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href=""></a>GrowthSW <span class="ot">&lt;-</span> GrowthSW <span class="sc">%&gt;%</span></span>
<span id="cb148-2"><a href=""></a>  tibble<span class="sc">::</span><span class="fu">rownames_to_column</span>(<span class="st">"country"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb148-3"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">continent =</span> <span class="fu">factor</span>(<span class="fu">ifelse</span>(</span>
<span id="cb148-4"><a href=""></a>    country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Zaire"</span>,<span class="st">"Niger"</span>,<span class="st">"Senegal"</span>, <span class="st">"Zimbabwe"</span> ,<span class="st">"Togo"</span>,</span>
<span id="cb148-5"><a href=""></a>           <span class="st">"South Africa"</span>, <span class="st">"Sierra Leone"</span> ,<span class="st">"Ghana"</span>,<span class="st">"Kenya"</span>,</span>
<span id="cb148-6"><a href=""></a>           <span class="st">"Mauritius"</span>), <span class="st">"africa"</span>, <span class="st">"other"</span>), <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"africa"</span>, <span class="st">"other"</span>)))</span>
<span id="cb148-7"><a href=""></a></span>
<span id="cb148-8"><a href=""></a>growth.eq6 <span class="ot">&lt;-</span> <span class="fu">lm</span>(growth <span class="sc">~</span> rgdp60 <span class="sc">+</span> tradeshare <span class="sc">+</span> continent, <span class="at">data =</span> GrowthSW)</span>
<span id="cb148-9"><a href=""></a><span class="fu">summary</span>(growth.eq6)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Interaction terms:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href=""></a>growth.eq7 <span class="ot">&lt;-</span> <span class="fu">lm</span>(growth <span class="sc">~</span></span>
<span id="cb149-2"><a href=""></a>                     <span class="fu">log</span>(rgdp60) <span class="sc">*</span> continent <span class="sc">+</span></span>
<span id="cb149-3"><a href=""></a>                     tradeshare<span class="sc">+</span><span class="fu">log</span>(education)<span class="sc">+</span></span>
<span id="cb149-4"><a href=""></a>                     revolutions<span class="sc">+</span>assassinations,</span>
<span id="cb149-5"><a href=""></a>                 <span class="at">data=</span>GrowthSW)</span>
<span id="cb149-6"><a href=""></a>sum.eq7 <span class="ot">&lt;-</span> <span class="fu">summary</span>(growth.eq7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="accessing-regression-results" class="slide level2"><h2>Accessing Regression Results</h2>
<ul>
<li>Use functions such as <code><a href="https://rdrr.io/r/stats/coef.html">coefficients()</a></code>, <code><a href="https://rdrr.io/r/stats/fitted.values.html">fitted()</a></code>, <code><a href="https://rdrr.io/r/stats/residuals.html">residuals()</a></code>.</li>
<li>Or directly access the <code>lm</code> or <code>summary.lm</code> list objects:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href=""></a><span class="fu">str</span>(growth.eq7)    <span class="do">## structure of lm object</span></span>
<span id="cb150-2"><a href=""></a><span class="fu">str</span>(sum.eq7)       <span class="do">## structure of summary.lm object</span></span>
<span id="cb150-3"><a href=""></a></span>
<span id="cb150-4"><a href=""></a><span class="co"># elements in lm object</span></span>
<span id="cb150-5"><a href=""></a>growth.eq7<span class="sc">$</span>coefficients</span>
<span id="cb150-6"><a href=""></a>growth.eq7<span class="sc">$</span>residuals</span>
<span id="cb150-7"><a href=""></a>growth.eq7<span class="sc">$</span>fitted</span>
<span id="cb150-8"><a href=""></a></span>
<span id="cb150-9"><a href=""></a><span class="co"># summary.lm provides additional information:</span></span>
<span id="cb150-10"><a href=""></a>sum.eq7<span class="sc">$</span>coefficients      <span class="do">## matrix with estimates, std-dev, t-stat, p-value</span></span>
<span id="cb150-11"><a href=""></a>sum.eq7<span class="sc">$</span>sigma             <span class="do">## residual standard error estimate</span></span>
<span id="cb150-12"><a href=""></a>sum.eq7<span class="sc">$</span>adj.r.squared     <span class="do">## adjusted R^2 of regression</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="model-selection" class="slide level2"><h2>Model Selection</h2>
<p>To determine which model is “better,” model selection criteria like AIC (Akaike Information Criterion) and BIC (Bayesian Information Criterion) are commonly used. The model with the lowest value is considered the “best.”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href=""></a><span class="co"># Akaike Criterion</span></span>
<span id="cb151-2"><a href=""></a><span class="fu">AIC</span>(growth.eq5)     <span class="co"># smaller is better</span></span>
<span id="cb151-3"><a href=""></a><span class="fu">AIC</span>(growth.eq1)</span>
<span id="cb151-4"><a href=""></a></span>
<span id="cb151-5"><a href=""></a><span class="co"># Bayesian Information Criterion</span></span>
<span id="cb151-6"><a href=""></a><span class="fu">BIC</span>(growth.eq5)     <span class="co"># smaller is better</span></span>
<span id="cb151-7"><a href=""></a><span class="fu">BIC</span>(growth.eq1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2"><p>The <code>MASS</code> package provides the <code>stepAIC</code> function, which iteratively finds an “optimal” model starting from a large model:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"MASS"</span>)</span>
<span id="cb152-2"><a href=""></a><span class="fu">library</span>(MASS)</span>
<span id="cb152-3"><a href=""></a>?stepAIC</span>
<span id="cb152-4"><a href=""></a>growth.eqAIC <span class="ot">&lt;-</span> <span class="fu">stepAIC</span>(<span class="fu">lm</span>(growth <span class="sc">~</span> (<span class="fu">log</span>(rgdp60) <span class="sc">+</span> tradeshare <span class="sc">+</span> <span class="fu">log</span>(education)<span class="sc">+</span></span>
<span id="cb152-5"><a href=""></a>                                      revolutions <span class="sc">+</span> assassinations <span class="sc">+</span> continent)<span class="sc">^</span><span class="dv">2</span>,</span>
<span id="cb152-6"><a href=""></a>                            <span class="at">data=</span>GrowthSW))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="task-6.1" class="slide level2"><h2>Task 6.1</h2>
<p>Reconsider the wide-format temperature data set <code>temperature</code>. You want to draw inference on whether temperature is trending, at the same time stay agnostic about the nature of the trend. Therefore, you decide to approximate the trending dynamics of temperature by a polynomial trend of order p <span class="math display">\[
  temp_t = \beta_0 + \beta_1 t + \beta_2 t^2 + \beta_3 t^3 + ... + \beta_p t^p + u_t.
\]</span> For one of the different locations</p>
<ol type="1">
<li>
<p>Test different specifications for the trend (i.e.&nbsp;choose <span class="math inline">\(p\)</span> and possibly set some of the coefficients above to zero). Allow for</p>
<ul>
<li>Only a constant and a linear trend</li>
<li>Quadratic, cubic, and higher order trends</li>
<li>Use the <code>stepAIC()</code> function</li>
</ul>
</li>
<li><p>Select one of your models and apply the <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> method to it. Discuss the estimates, standard errors, p-values, residual sum of squares, and the adjusted <span class="math inline">\(R^2\)</span> value.</p></li>
</ol></section><section id="model-diagnosis-and-tests" class="slide level2"><h2>Model Diagnosis and Tests</h2>
<h3 id="heteroskedasticity">1. Heteroskedasticity</h3>
<p>Graphical examination:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href=""></a>uhat_AIC <span class="ot">&lt;-</span> <span class="fu">resid</span>(growth.eqAIC) <span class="co"># growth.eqAIC$residuals</span></span>
<span id="cb153-2"><a href=""></a>yhat_AIC <span class="ot">&lt;-</span> <span class="fu">fitted</span>(growth.eqAIC)</span>
<span id="cb153-3"><a href=""></a><span class="fu">plot</span>(yhat_AIC,uhat_AIC<span class="sc">^</span><span class="dv">2</span>, <span class="at">main=</span><span class="st">"Squared Residuals vs. Fitted Values"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="PIR_quardo_files/figure-revealjs/step_aic-1.png" width="960" class="r-stretch"></section><section class="slide level2"><p>Heteroskedasticity tests (Breusch-Pagan, White):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href=""></a><span class="co"># Breusch - Pagan</span></span>
<span id="cb154-2"><a href=""></a><span class="fu">bptest</span>(growth.eqAIC)</span>
<span id="cb154-3"><a href=""></a></span>
<span id="cb154-4"><a href=""></a><span class="co"># White Test</span></span>
<span id="cb154-5"><a href=""></a><span class="fu">summary</span>(<span class="fu">lm</span>(<span class="fu">I</span>(uhat_AIC<span class="sc">^</span><span class="dv">2</span>)<span class="sc">~</span> yhat_AIC <span class="sc">+</span> <span class="fu">I</span>(yhat_AIC<span class="sc">^</span><span class="dv">2</span>))</span>
<span id="cb154-6"><a href=""></a>        )<span class="sc">$</span>r.squared <span class="sc">*</span> <span class="fu">length</span>(yhat_AIC) <span class="sc">%&gt;%</span></span>
<span id="cb154-7"><a href=""></a>  <span class="fu">pchisq</span>(<span class="at">df =</span> <span class="dv">2</span>, <span class="at">lower.tail =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Solution: Heteroskedasticity-robust variance-covariance matrix</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href=""></a>vcov.robust <span class="ot">&lt;-</span> <span class="fu">vcovHC</span>(growth.eqAIC, <span class="at">type =</span> <span class="st">"HC"</span>)</span>
<span id="cb155-2"><a href=""></a><span class="fu">coeftest</span>(growth.eqAIC,<span class="at">vcov=</span>vcov.robust)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2"><h3 id="model-diagnosis-2.-nonlinearity">Model Diagnosis: 2. Nonlinearity</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href=""></a><span class="fu">plot</span>(yhat_AIC,uhat_AIC,<span class="at">main=</span><span class="st">"Residuals vs. Fitted Values"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="PIR_quardo_files/figure-revealjs/lm_nonlinear-1.png" width="960" class="r-stretch"></section><section class="slide level2"><p>RESET Test:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href=""></a><span class="fu">resettest</span>(growth.eqAIC)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Additional diagnostic plots:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href=""></a><span class="fu">plot</span>(growth.eqAIC)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2"><h3 id="hypothesis-testing">Hypothesis Testing</h3>
<ul>
<li>Decisions on simple hypotheses of the form <span class="math inline">\(H_0: \beta_j = 0\)</span> can be directly read from the output</li>
<li>Similarly: Overall F-test</li>
<li>Further hypotheses (e.g., <span class="math inline">\(H_0: \beta_j = 3\)</span>) or composite hypotheses can be tested using the <code>linearHypothesis()</code> function from the <code>car</code> package:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href=""></a><span class="do">## Symbolic notation:</span></span>
<span id="cb159-2"><a href=""></a><span class="fu">linearHypothesis</span>(growth.eqAIC, <span class="st">"log(education)=2"</span>)</span>
<span id="cb159-3"><a href=""></a></span>
<span id="cb159-4"><a href=""></a><span class="do">## Alternative form of hypothesis: R %*% beta = r  (where R is a 1xk vector, r is scalar)</span></span>
<span id="cb159-5"><a href=""></a>R <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>)   <span class="co"># 4th entry selects the 4th coefficient</span></span>
<span id="cb159-6"><a href=""></a>r <span class="ot">&lt;-</span> <span class="dv">2</span>                      <span class="co"># .. which should be 2 according to H_0</span></span>
<span id="cb159-7"><a href=""></a><span class="fu">linearHypothesis</span>( growth.eqAIC , <span class="at">hypothesis.matrix =</span>R, <span class="at">rhs=</span>r )</span>
<span id="cb159-8"><a href=""></a></span>
<span id="cb159-9"><a href=""></a><span class="do">## Heteroskedasticity-robust test:</span></span>
<span id="cb159-10"><a href=""></a><span class="fu">linearHypothesis</span>(growth.eqAIC,<span class="st">"log(education)=2"</span>,<span class="at">vcov=</span>vcov.robust)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2"><h3 id="multiple-hypothesis-testing-f-tests">Multiple Hypothesis Testing (F-Tests)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href=""></a><span class="do">## Symbolic notation</span></span>
<span id="cb160-2"><a href=""></a><span class="fu">linearHypothesis</span>(growth.eqAIC,</span>
<span id="cb160-3"><a href=""></a>                 <span class="fu">c</span>(<span class="st">"log(rgdp60)=0"</span>,<span class="st">"log(rgdp60):assassinations=0"</span>))</span>
<span id="cb160-4"><a href=""></a></span>
<span id="cb160-5"><a href=""></a><span class="do">## Using the formulation R %*% beta = r:</span></span>
<span id="cb160-6"><a href=""></a>R <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">7</span>), <span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">7</span>),<span class="dv">1</span>,<span class="dv">0</span>),<span class="at">nrow=</span><span class="dv">2</span>, <span class="at">byrow=</span><span class="cn">TRUE</span>)</span>
<span id="cb160-7"><a href=""></a>r <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>)</span>
<span id="cb160-8"><a href=""></a><span class="fu">linearHypothesis</span>(growth.eqAIC,R,r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<h3 id="confidence-intervals">Confidence Intervals</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href=""></a><span class="fu">confint</span>(growth.eqAIC,<span class="at">parm=</span><span class="fu">c</span>(<span class="st">"revolutions"</span>),<span class="at">level=</span><span class="fl">0.9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="prediction" class="slide level2"><h2>Prediction</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href=""></a><span class="do">## New observations</span></span>
<span id="cb162-2"><a href=""></a>X0 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>( <span class="at">growth=</span><span class="fu">c</span>(<span class="cn">NA</span>,<span class="cn">NA</span>),</span>
<span id="cb162-3"><a href=""></a>                  <span class="at">revolutions=</span><span class="fu">c</span>(<span class="fl">0.3</span>,<span class="fl">0.13</span>),</span>
<span id="cb162-4"><a href=""></a>                  <span class="at">rgdp60=</span><span class="fu">c</span>(<span class="dv">2000</span>,<span class="dv">6000</span>),</span>
<span id="cb162-5"><a href=""></a>                  <span class="at">tradeshare=</span><span class="fu">c</span>(<span class="fl">0.3</span>,<span class="fl">0.7</span>),</span>
<span id="cb162-6"><a href=""></a>                  <span class="at">continent=</span><span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">"africa"</span>,<span class="st">"other"</span>),</span>
<span id="cb162-7"><a href=""></a>                                   <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"other"</span>,<span class="st">"africa"</span>)),</span>
<span id="cb162-8"><a href=""></a>                  <span class="at">assassinations=</span><span class="fu">c</span>(<span class="fl">0.4</span>,<span class="fl">0.2</span>),</span>
<span id="cb162-9"><a href=""></a>                  <span class="at">education=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)  )</span>
<span id="cb162-10"><a href=""></a></span>
<span id="cb162-11"><a href=""></a><span class="fu">rownames</span>(X0) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Country 1"</span>, <span class="st">"Country 2"</span>)</span>
<span id="cb162-12"><a href=""></a></span>
<span id="cb162-13"><a href=""></a><span class="do">## Point prediction, prediction interval, etc.</span></span>
<span id="cb162-14"><a href=""></a><span class="fu">predict</span>(growth.eqAIC, <span class="at">newdata=</span>X0, <span class="at">se.fit=</span><span class="cn">TRUE</span>, <span class="at">interval=</span><span class="st">"prediction"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="task-6.2" class="slide level2"><h2>Task 6.2</h2>
<ul>
<li>Use the <code>CPS1985</code> dataset to specify and estimate an ad-hoc regression model for the logarithm of hourly wages.</li>
<li>Starting from a very general model, perform model selection by iteratively removing the least significant regressor. Then, test the exclusion restrictions applied in the process.<br><strong>Hints:</strong>
<ul>
<li>General model: Use a squared formula for all possible interactions.</li>
<li>Implement a loop that checks whether the maximum p-value is greater than 5%.</li>
<li>Remove the respective regressor from the model. Important: To simplify the removal of individual regressors, ensure that the model outputs matrix X using <code>lm(y~x, x=TRUE)</code>. The design matrix <code>X</code> can then be accessed via <code>a$x</code> when <code>a &lt;- lm(y~x, x=TRUE)</code>.</li>
</ul>
</li>
</ul></section><section class="slide level2"><ul>
<li>Compare the two models using appropriate diagnostic tests, criteria, and graphical representations. Decide on the better model.</li>
<li>Estimate the expected wage for an employee whose explanatory characteristics correspond to the median values. Also, determine the expected wage for an “average worker.”<br><strong>Hint:</strong> Use a model that includes only numerical explanatory variables.</li>
<li>Provide a prediction interval for both cases.</li>
</ul></section></section><section id="efficiency" class="title-slide slide level1 center"><h1>Some Rules for Efficient Code</h1>
<ul>
<li><p><strong>Vectorize!</strong> This ensures that loops are executed in C rather than in R.</p></li>
<li><p><strong>Do not dynamically increase object size in loops</strong>; instead, initialize an empty object first and then populate it.</p></li>
<li>
<p>Some R functions have significant <em>overhead</em> to handle various cases. Often, there are more specific, faster alternatives, such as:</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/stats/lm.html">lm()</a></code> vs.&nbsp;<code><a href="https://rdrr.io/r/stats/lmfit.html">lm.fit()</a></code> or <code><a href="https://rdrr.io/r/stats/lmfit.html">.lm.fit()</a></code>
</li>
</ul>
</li>
<li><p>Use <strong>profiling methods</strong> to identify where execution time is high and where optimization may be worthwhile.</p></li>
<li><p>If necessary, implement <strong>bottlenecks in C/C++ or Fortran</strong>.</p></li>
<li><p>Balance <strong>faster execution time vs.&nbsp;extra implementation time</strong> for optimizations.</p></li>
</ul></section><section id="thanks" class="title-slide slide level1 center"><h1>Thanks!</h1>
<p>Slides created via <a href="https://quarto.org"><strong>Quarto</strong></a>, a multi-language version of R Markdown that uses knitr to execute Rmd files.</p>
<p>The chakra comes from <a href="https://remarkjs.com">remark.js</a>, <a href="http://yihui.name/knitr"><strong>knitr</strong></a>, and <a href="https://rmarkdown.rstudio.com">R Markdown</a>.</p>

</section>
</div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="PIR_quardo_files/libs/revealjs/dist/reveal.js"></script><!-- reveal.js plugins --><script src="PIR_quardo_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script><script src="PIR_quardo_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script><script src="PIR_quardo_files/libs/revealjs/plugin/reveal-menu/menu.js"></script><script src="PIR_quardo_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script><script src="PIR_quardo_files/libs/revealjs/plugin/quarto-support/support.js"></script><script src="PIR_quardo_files/libs/revealjs/plugin/notes/notes.js"></script><script src="PIR_quardo_files/libs/revealjs/plugin/search/search.js"></script><script src="PIR_quardo_files/libs/revealjs/plugin/zoom/zoom.js"></script><script src="PIR_quardo_files/libs/revealjs/plugin/math/math.js"></script><script>window.define = window.backupDefine; window.backupDefine = undefined;</script><script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script><script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script><script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>


</body></html>