---
title: "Introduction to R"
subtitle: "Session 3"
author: "fill presenter names here"
format:
  revealjs:
    theme: "theme.scss"
    transition: fade
    background-transition: fade
    highlight-style: ayu-mirage
    fontsize: 1.5em
code-link: true
execute:
  echo: true
  freeze: auto
filters:
  - diagram
diagram:
  engine:
    tikz:
      header-includes:
        - '\usepackage{adjustbox,xcolor}'
        - '\usetikzlibrary{arrows, shapes}'
        - '\definecolor{UMdblue}{RGB}{0,28,61}'
        - '\definecolor{UMlblue}{RGB}{0,162,219}'
        - '\definecolor{UMorangered}{RGB}{232,78,16}'
        - '\definecolor{UMorange}{RGB}{243,148,37}'
        - '\definecolor{UMred}{RGB}{174,11,18}'
---

<!-- To use TikZ, we need to install the following extension: -->
<!-- quarto install extension pandoc-ext/diagram -->

# Course Overview

1.  [Functions in R](#functions)
2.	[Bonus: Looking Inside Functions](#functions2)
3.  [Objects Revisited](#objects)
4.	[Packages](#packages)

# Functions

## Functions
We have already encountered many *functions* in R:

*Add examples based on previous sessions*

## Function Overview

A function consists of three parts:

```{mermaid, echo=FALSE}
flowchart LR
in(Input) --> f{Operations}
f --> out(Output)
```

```{tikz, echo=FALSE}
\begin{tikzpicture}[every node/.style={draw, minimum size=2cm}]
\node[align=center] (in) at (0,0) {Input\\\emph{function argument(s)}};
\node[align=center] (f) at (6,0) {Function\\\emph{performs operations on input}};
\node[align=center] (out) at (12,0) {Output\\\emph{the result of the operations}};
\draw [->, line width=0.1cm] (in) to (f);
\draw [->, line width=0.1cm] (f) to (out);
\end{tikzpicture}
```

## Arguments

-   A function is called by specifying the function name followed by one or more comma-separated arguments in parentheses: `function_name(argument1 = value1, argument2 = value2,...)`

-   Argument names do not always need to be specified: `function_name(value1, value2,...)`

-   Attention: Order matters!

-   There are also default arguments, which do not always need to be specified. More on this later.

## Extending R with Packages

There are many packages available on [CRAN](https://cran.r-project.org/) for various applications. These allow for expanding the relatively small core system of R. While R comes with some standard packages, many need to be installed separately.

```{r list11, eval = FALSE}
install.packages("AER")  # Install a previously unavailable package
library(AER)             # Load the package (makes objects 
                         # in the package visible in the
                         # global namespace)
data(CASchools)          # Example dataset "CASchools"
?ivreg                   # Help for function ivreg
```

-   `search()` shows the search path, i.e., which packages are already loaded:

```{r list12, eval = TRUE}
search()
```


## Lists

Vectors, matrices, and arrays require all elements to be of the same data type. Lists, however, are more general as they allow arbitrary combinations of data types. A list is created using the `list()` function.

```{r list36, eval = FALSE}
L1 <- list(
  a = 1:3,
  A = matrix(1:9,3,3),
  w = "Hello!"        # Elements can have names AND be of any type!
)
```

Lists can also contain other lists:

```{r list37, eval = FALSE}
L2 <- list(
  a = 1:3,
  l1 = L1 # List within a list
)
```

## Lists

Lists are indexed using double square brackets (numeric, logical, by name):

```{r list38, eval = FALSE}
L1[[1]]    # 1,2,3     -> Vector
L1[1]      # list(1:3) -> Still a list (sublist of L1)
L1[["w"]]  # "Hello!"
```

Named lists can also be accessed using the `$` operator:

```{r list39, eval = FALSE}
L1$w       # "Hello!"
```

## Recursion

Sometimes quite useful: recursive functions.

```{r factorial , eval = FALSE}
factorial <- function(n){
  if (n<0) stop("Factorial only for positive integers")

  if (n<2) return(1)

  n * factorial(n-1)
}
```









